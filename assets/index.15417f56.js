const co=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};co();var Ae=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function lo(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var vo={},ho=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),yo=lo(ho),yr={};yr.test=function(){return typeof Ae.queueMicrotask=="function"};yr.install=function(e){return function(){Ae.queueMicrotask(e)}};var gr={},Ui=Ae.MutationObserver||Ae.WebKitMutationObserver;gr.test=function(){return Ui};gr.install=function(e){var t=0,n=new Ui(e),r=Ae.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}};var pr={};pr.test=function(){return Ae.setImmediate?!1:typeof Ae.MessageChannel!="undefined"};pr.install=function(e){var t=new Ae.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}};var _r={};_r.test=function(){return"document"in Ae&&"onreadystatechange"in Ae.document.createElement("script")};_r.install=function(e){return function(){var t=Ae.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},Ae.document.documentElement.appendChild(t),e}};var mr={};mr.test=function(){return!0};mr.install=function(e){return function(){setTimeout(e,0)}};var Ct=[yo,yr,gr,pr,_r,mr],st,He,kt=-1,De=[],Un=!1;function go(){!st||!He||(st=!1,He.length?De=He.concat(De):kt=-1,De.length&&zi())}function zi(){if(!st){Un=!1,st=!0;for(var e=De.length,t=setTimeout(go);e;){for(He=De,De=[];He&&++kt<e;)He[kt].run();kt=-1,e=De.length}He=null,kt=-1,st=!1,clearTimeout(t)}}var Ki,St=-1,po=Ct.length;for(;++St<po;)if(Ct[St]&&Ct[St].test&&Ct[St].test()){Ki=Ct[St].install(zi);break}function Qi(e,t){this.fun=e,this.array=t}Qi.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}};var pe=_o;function _o(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];De.push(new Qi(e,t)),!Un&&!st&&(Un=!0,Ki())}var Zt,mo=new Uint8Array(16);function wo(){if(!Zt&&(Zt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Zt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zt(mo)}var $o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function bo(e){return typeof e=="string"&&$o.test(e)}var he=[];for(var kn=0;kn<256;++kn)he.push((kn+256).toString(16).substr(1));function Ao(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(he[e[t+0]]+he[e[t+1]]+he[e[t+2]]+he[e[t+3]]+"-"+he[e[t+4]]+he[e[t+5]]+"-"+he[e[t+6]]+he[e[t+7]]+"-"+he[e[t+8]]+he[e[t+9]]+"-"+he[e[t+10]]+he[e[t+11]]+he[e[t+12]]+he[e[t+13]]+he[e[t+14]]+he[e[t+15]]).toLowerCase();if(!bo(n))throw TypeError("Stringified UUID is invalid");return n}function Gi(e,t,n){e=e||{};var r=e.random||(e.rng||wo)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Ao(r)}var Hi={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(g,v){var c=g[0],l=g[1],h=g[2],_=g[3];c+=(l&h|~l&_)+v[0]-680876936|0,c=(c<<7|c>>>25)+l|0,_+=(c&l|~c&h)+v[1]-389564586|0,_=(_<<12|_>>>20)+c|0,h+=(_&c|~_&l)+v[2]+606105819|0,h=(h<<17|h>>>15)+_|0,l+=(h&_|~h&c)+v[3]-1044525330|0,l=(l<<22|l>>>10)+h|0,c+=(l&h|~l&_)+v[4]-176418897|0,c=(c<<7|c>>>25)+l|0,_+=(c&l|~c&h)+v[5]+1200080426|0,_=(_<<12|_>>>20)+c|0,h+=(_&c|~_&l)+v[6]-1473231341|0,h=(h<<17|h>>>15)+_|0,l+=(h&_|~h&c)+v[7]-45705983|0,l=(l<<22|l>>>10)+h|0,c+=(l&h|~l&_)+v[8]+1770035416|0,c=(c<<7|c>>>25)+l|0,_+=(c&l|~c&h)+v[9]-1958414417|0,_=(_<<12|_>>>20)+c|0,h+=(_&c|~_&l)+v[10]-42063|0,h=(h<<17|h>>>15)+_|0,l+=(h&_|~h&c)+v[11]-1990404162|0,l=(l<<22|l>>>10)+h|0,c+=(l&h|~l&_)+v[12]+1804603682|0,c=(c<<7|c>>>25)+l|0,_+=(c&l|~c&h)+v[13]-40341101|0,_=(_<<12|_>>>20)+c|0,h+=(_&c|~_&l)+v[14]-1502002290|0,h=(h<<17|h>>>15)+_|0,l+=(h&_|~h&c)+v[15]+1236535329|0,l=(l<<22|l>>>10)+h|0,c+=(l&_|h&~_)+v[1]-165796510|0,c=(c<<5|c>>>27)+l|0,_+=(c&h|l&~h)+v[6]-1069501632|0,_=(_<<9|_>>>23)+c|0,h+=(_&l|c&~l)+v[11]+643717713|0,h=(h<<14|h>>>18)+_|0,l+=(h&c|_&~c)+v[0]-373897302|0,l=(l<<20|l>>>12)+h|0,c+=(l&_|h&~_)+v[5]-701558691|0,c=(c<<5|c>>>27)+l|0,_+=(c&h|l&~h)+v[10]+38016083|0,_=(_<<9|_>>>23)+c|0,h+=(_&l|c&~l)+v[15]-660478335|0,h=(h<<14|h>>>18)+_|0,l+=(h&c|_&~c)+v[4]-405537848|0,l=(l<<20|l>>>12)+h|0,c+=(l&_|h&~_)+v[9]+568446438|0,c=(c<<5|c>>>27)+l|0,_+=(c&h|l&~h)+v[14]-1019803690|0,_=(_<<9|_>>>23)+c|0,h+=(_&l|c&~l)+v[3]-187363961|0,h=(h<<14|h>>>18)+_|0,l+=(h&c|_&~c)+v[8]+1163531501|0,l=(l<<20|l>>>12)+h|0,c+=(l&_|h&~_)+v[13]-1444681467|0,c=(c<<5|c>>>27)+l|0,_+=(c&h|l&~h)+v[2]-51403784|0,_=(_<<9|_>>>23)+c|0,h+=(_&l|c&~l)+v[7]+1735328473|0,h=(h<<14|h>>>18)+_|0,l+=(h&c|_&~c)+v[12]-1926607734|0,l=(l<<20|l>>>12)+h|0,c+=(l^h^_)+v[5]-378558|0,c=(c<<4|c>>>28)+l|0,_+=(c^l^h)+v[8]-2022574463|0,_=(_<<11|_>>>21)+c|0,h+=(_^c^l)+v[11]+1839030562|0,h=(h<<16|h>>>16)+_|0,l+=(h^_^c)+v[14]-35309556|0,l=(l<<23|l>>>9)+h|0,c+=(l^h^_)+v[1]-1530992060|0,c=(c<<4|c>>>28)+l|0,_+=(c^l^h)+v[4]+1272893353|0,_=(_<<11|_>>>21)+c|0,h+=(_^c^l)+v[7]-155497632|0,h=(h<<16|h>>>16)+_|0,l+=(h^_^c)+v[10]-1094730640|0,l=(l<<23|l>>>9)+h|0,c+=(l^h^_)+v[13]+681279174|0,c=(c<<4|c>>>28)+l|0,_+=(c^l^h)+v[0]-358537222|0,_=(_<<11|_>>>21)+c|0,h+=(_^c^l)+v[3]-722521979|0,h=(h<<16|h>>>16)+_|0,l+=(h^_^c)+v[6]+76029189|0,l=(l<<23|l>>>9)+h|0,c+=(l^h^_)+v[9]-640364487|0,c=(c<<4|c>>>28)+l|0,_+=(c^l^h)+v[12]-421815835|0,_=(_<<11|_>>>21)+c|0,h+=(_^c^l)+v[15]+530742520|0,h=(h<<16|h>>>16)+_|0,l+=(h^_^c)+v[2]-995338651|0,l=(l<<23|l>>>9)+h|0,c+=(h^(l|~_))+v[0]-198630844|0,c=(c<<6|c>>>26)+l|0,_+=(l^(c|~h))+v[7]+1126891415|0,_=(_<<10|_>>>22)+c|0,h+=(c^(_|~l))+v[14]-1416354905|0,h=(h<<15|h>>>17)+_|0,l+=(_^(h|~c))+v[5]-57434055|0,l=(l<<21|l>>>11)+h|0,c+=(h^(l|~_))+v[12]+1700485571|0,c=(c<<6|c>>>26)+l|0,_+=(l^(c|~h))+v[3]-1894986606|0,_=(_<<10|_>>>22)+c|0,h+=(c^(_|~l))+v[10]-1051523|0,h=(h<<15|h>>>17)+_|0,l+=(_^(h|~c))+v[1]-2054922799|0,l=(l<<21|l>>>11)+h|0,c+=(h^(l|~_))+v[8]+1873313359|0,c=(c<<6|c>>>26)+l|0,_+=(l^(c|~h))+v[15]-30611744|0,_=(_<<10|_>>>22)+c|0,h+=(c^(_|~l))+v[6]-1560198380|0,h=(h<<15|h>>>17)+_|0,l+=(_^(h|~c))+v[13]+1309151649|0,l=(l<<21|l>>>11)+h|0,c+=(h^(l|~_))+v[4]-145523070|0,c=(c<<6|c>>>26)+l|0,_+=(l^(c|~h))+v[11]-1120210379|0,_=(_<<10|_>>>22)+c|0,h+=(c^(_|~l))+v[2]+718787259|0,h=(h<<15|h>>>17)+_|0,l+=(_^(h|~c))+v[9]-343485551|0,l=(l<<21|l>>>11)+h|0,g[0]=c+g[0]|0,g[1]=l+g[1]|0,g[2]=h+g[2]|0,g[3]=_+g[3]|0}function a(g){var v=[],c;for(c=0;c<64;c+=4)v[c>>2]=g.charCodeAt(c)+(g.charCodeAt(c+1)<<8)+(g.charCodeAt(c+2)<<16)+(g.charCodeAt(c+3)<<24);return v}function o(g){var v=[],c;for(c=0;c<64;c+=4)v[c>>2]=g[c]+(g[c+1]<<8)+(g[c+2]<<16)+(g[c+3]<<24);return v}function u(g){var v=g.length,c=[1732584193,-271733879,-1732584194,271733878],l,h,_,T,L,B;for(l=64;l<=v;l+=64)i(c,a(g.substring(l-64,l)));for(g=g.substring(l-64),h=g.length,_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<h;l+=1)_[l>>2]|=g.charCodeAt(l)<<(l%4<<3);if(_[l>>2]|=128<<(l%4<<3),l>55)for(i(c,_),l=0;l<16;l+=1)_[l]=0;return T=v*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(T[2],16),B=parseInt(T[1],16)||0,_[14]=L,_[15]=B,i(c,_),c}function f(g){var v=g.length,c=[1732584193,-271733879,-1732584194,271733878],l,h,_,T,L,B;for(l=64;l<=v;l+=64)i(c,o(g.subarray(l-64,l)));for(g=l-64<v?g.subarray(l-64):new Uint8Array(0),h=g.length,_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<h;l+=1)_[l>>2]|=g[l]<<(l%4<<3);if(_[l>>2]|=128<<(l%4<<3),l>55)for(i(c,_),l=0;l<16;l+=1)_[l]=0;return T=v*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(T[2],16),B=parseInt(T[1],16)||0,_[14]=L,_[15]=B,i(c,_),c}function y(g){var v="",c;for(c=0;c<4;c+=1)v+=r[g>>c*8+4&15]+r[g>>c*8&15];return v}function $(g){var v;for(v=0;v<g.length;v+=1)g[v]=y(g[v]);return g.join("")}$(u("hello")),typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function g(v,c){return v=v|0||0,v<0?Math.max(v+c,0):Math.min(v,c)}ArrayBuffer.prototype.slice=function(v,c){var l=this.byteLength,h=g(v,l),_=l,T,L,B,R;return c!==n&&(_=g(c,l)),h>_?new ArrayBuffer(0):(T=_-h,L=new ArrayBuffer(T),B=new Uint8Array(L),R=new Uint8Array(this,h,T),B.set(R),L)}}();function s(g){return/[\u0080-\uFFFF]/.test(g)&&(g=unescape(encodeURIComponent(g))),g}function m(g,v){var c=g.length,l=new ArrayBuffer(c),h=new Uint8Array(l),_;for(_=0;_<c;_+=1)h[_]=g.charCodeAt(_);return v?h:l}function A(g){return String.fromCharCode.apply(null,new Uint8Array(g))}function b(g,v,c){var l=new Uint8Array(g.byteLength+v.byteLength);return l.set(new Uint8Array(g)),l.set(new Uint8Array(v),g.byteLength),c?l:l.buffer}function O(g){var v=[],c=g.length,l;for(l=0;l<c-1;l+=2)v.push(parseInt(g.substr(l,2),16));return String.fromCharCode.apply(String,v)}function S(){this.reset()}return S.prototype.append=function(g){return this.appendBinary(s(g)),this},S.prototype.appendBinary=function(g){this._buff+=g,this._length+=g.length;var v=this._buff.length,c;for(c=64;c<=v;c+=64)i(this._hash,a(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},S.prototype.end=function(g){var v=this._buff,c=v.length,l,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_;for(l=0;l<c;l+=1)h[l>>2]|=v.charCodeAt(l)<<(l%4<<3);return this._finish(h,c),_=$(this._hash),g&&(_=O(_)),this.reset(),_},S.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},S.prototype.setState=function(g){return this._buff=g.buff,this._length=g.length,this._hash=g.hash,this},S.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},S.prototype._finish=function(g,v){var c=v,l,h,_;if(g[c>>2]|=128<<(c%4<<3),c>55)for(i(this._hash,g),c=0;c<16;c+=1)g[c]=0;l=this._length*8,l=l.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(l[2],16),_=parseInt(l[1],16)||0,g[14]=h,g[15]=_,i(this._hash,g)},S.hash=function(g,v){return S.hashBinary(s(g),v)},S.hashBinary=function(g,v){var c=u(g),l=$(c);return v?O(l):l},S.ArrayBuffer=function(){this.reset()},S.ArrayBuffer.prototype.append=function(g){var v=b(this._buff.buffer,g,!0),c=v.length,l;for(this._length+=g.byteLength,l=64;l<=c;l+=64)i(this._hash,o(v.subarray(l-64,l)));return this._buff=l-64<c?new Uint8Array(v.buffer.slice(l-64)):new Uint8Array(0),this},S.ArrayBuffer.prototype.end=function(g){var v=this._buff,c=v.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h,_;for(h=0;h<c;h+=1)l[h>>2]|=v[h]<<(h%4<<3);return this._finish(l,c),_=$(this._hash),g&&(_=O(_)),this.reset(),_},S.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.ArrayBuffer.prototype.getState=function(){var g=S.prototype.getState.call(this);return g.buff=A(g.buff),g},S.ArrayBuffer.prototype.setState=function(g){return g.buff=m(g.buff,!0),S.prototype.setState.call(this,g)},S.ArrayBuffer.prototype.destroy=S.prototype.destroy,S.ArrayBuffer.prototype._finish=S.prototype._finish,S.ArrayBuffer.hash=function(g,v){var c=f(new Uint8Array(g)),l=$(c);return v?O(l):l},S})})(Hi);var an=Hi.exports,hn={};hn.stringify=function(t){var n=[];n.push({obj:t});for(var r="",i,a,o,u,f,y,$,s,m,A,b;i=n.pop();)if(a=i.obj,o=i.prefix||"",u=i.val||"",r+=o,u)r+=u;else if(typeof a!="object")r+=typeof a=="undefined"?null:JSON.stringify(a);else if(a===null)r+="null";else if(Array.isArray(a)){for(n.push({val:"]"}),f=a.length-1;f>=0;f--)y=f===0?"":",",n.push({obj:a[f],prefix:y});n.push({val:"["})}else{$=[];for(s in a)a.hasOwnProperty(s)&&$.push(s);for(n.push({val:"}"}),f=$.length-1;f>=0;f--)m=$[f],A=a[m],b=f>0?",":"",b+=JSON.stringify(m)+":",n.push({obj:A,prefix:b});n.push({val:"{"})}return r};function at(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(e);else if(a===t.length-2){var o=t.pop();i[o]=e}else t.push(e)}hn.parse=function(e){for(var t=[],n=[],r=0,i,a,o,u,f,y,$,s,m;;){if(i=e[r++],i==="}"||i==="]"||typeof i=="undefined"){if(t.length===1)return t.pop();at(t.pop(),t,n);continue}switch(i){case" ":case"	":case`
`:case":":case",":break;case"n":r+=3,at(null,t,n);break;case"t":r+=3,at(!0,t,n);break;case"f":r+=4,at(!1,t,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(a="",r--;;)if(o=e[r++],/[\d\.\-e\+]/.test(o))a+=o;else{r--;break}at(parseFloat(a),t,n);break;case'"':for(u="",f=void 0,y=0;$=e[r++],$!=='"'||f==="\\"&&y%2===1;)u+=$,f=$,f==="\\"?y++:y=0;at(JSON.parse('"'+u+'"'),t,n);break;case"[":s={element:[],index:t.length},t.push(s.element),n.push(s);break;case"{":m={element:{},index:t.length},t.push(m.element),n.push(m);break;default:throw new Error("unexpectedly reached end of input: "+i)}}};var Be=So;function So(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}else return e.call(this,[])}}var zn={exports:{}};typeof Object.create=="function"?zn.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:zn.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var _e=zn.exports,wr={exports:{}},ft=typeof Reflect=="object"?Reflect:null,Hr=ft&&typeof ft.apply=="function"?ft.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},tn;ft&&typeof ft.ownKeys=="function"?tn=ft.ownKeys:Object.getOwnPropertySymbols?tn=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:tn=function(t){return Object.getOwnPropertyNames(t)};function Oo(e){console&&console.warn&&console.warn(e)}var Ji=Number.isNaN||function(t){return t!==t};function ne(){ne.init.call(this)}wr.exports=ne;wr.exports.once=ko;ne.EventEmitter=ne;ne.prototype._events=void 0;ne.prototype._eventsCount=0;ne.prototype._maxListeners=void 0;var Jr=10;function yn(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ne,"defaultMaxListeners",{enumerable:!0,get:function(){return Jr},set:function(e){if(typeof e!="number"||e<0||Ji(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Jr=e}});ne.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ne.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ji(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Wi(e){return e._maxListeners===void 0?ne.defaultMaxListeners:e._maxListeners}ne.prototype.getMaxListeners=function(){return Wi(this)};ne.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var f=a[t];if(f===void 0)return!1;if(typeof f=="function")Hr(f,this,n);else for(var y=f.length,$=ea(f,y),r=0;r<y;++r)Hr($[r],this,n);return!0};function Yi(e,t,n,r){var i,a,o;if(yn(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),o===void 0)o=a[t]=n,++e._eventsCount;else if(typeof o=="function"?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Wi(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,Oo(u)}return e}ne.prototype.addListener=function(t,n){return Yi(this,t,n,!1)};ne.prototype.on=ne.prototype.addListener;ne.prototype.prependListener=function(t,n){return Yi(this,t,n,!0)};function xo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xi(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=xo.bind(r);return i.listener=n,r.wrapFn=i,i}ne.prototype.once=function(t,n){return yn(n),this.on(t,Xi(this,t,n)),this};ne.prototype.prependOnceListener=function(t,n){return yn(n),this.prependListener(t,Xi(this,t,n)),this};ne.prototype.removeListener=function(t,n){var r,i,a,o,u;if(yn(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(a=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){u=r[o].listener,a=o;break}if(a<0)return this;a===0?r.shift():Eo(r,a),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};ne.prototype.off=ne.prototype.removeListener;ne.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var a=Object.keys(r),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function Zi(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Co(i):ea(i,i.length)}ne.prototype.listeners=function(t){return Zi(this,t,!0)};ne.prototype.rawListeners=function(t){return Zi(this,t,!1)};ne.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Vi.call(e,t)};ne.prototype.listenerCount=Vi;function Vi(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ne.prototype.eventNames=function(){return this._eventsCount>0?tn(this._events):[]};function ea(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Eo(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Co(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function ko(e,t){return new Promise(function(n,r){function i(o){e.removeListener(t,a),r(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}ta(e,t,a,{once:!0}),t!=="error"&&To(e,i,{once:!0})})}function To(e,t,n){typeof e.on=="function"&&ta(e,"error",t,n)}function ta(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var ge=wr.exports;function gn(e){return"$"+e}function na(e){return e.substring(1)}function Le(){this._store={}}Le.prototype.get=function(e){var t=gn(e);return this._store[t]};Le.prototype.set=function(e,t){var n=gn(e);return this._store[n]=t,!0};Le.prototype.has=function(e){var t=gn(e);return t in this._store};Le.prototype.keys=function(){return Object.keys(this._store).map(e=>na(e))};Le.prototype.delete=function(e){var t=gn(e),n=t in this._store;return delete this._store[t],n};Le.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],a=this._store[i];i=na(i),e(a,i)}};Object.defineProperty(Le.prototype,"size",{get:function(){return Object.keys(this._store).length}});function Mt(e){if(this._store=new Le,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}Mt.prototype.add=function(e){return this._store.set(e,!0)};Mt.prototype.has=function(e){return this._store.has(e)};Mt.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(Mt.prototype,"size",{get:function(){return this._store.size}});function Io(){if(typeof Symbol=="undefined"||typeof Map=="undefined"||typeof Set=="undefined")return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}var ht,we;Io()?(ht=Set,we=Map):(ht=Mt,we=Le);function Po(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer||typeof Blob!="undefined"&&e instanceof Blob}function qo(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function jo(e){if(e instanceof ArrayBuffer)return qo(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var ra=Function.prototype.toString,Bo=ra.call(Object);function Lo(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&ra.call(n)==Bo}function le(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=le(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(Po(e))return jo(e);if(!Lo(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=le(e[n]);typeof i!="undefined"&&(t[n]=i)}return t}function ia(e){var t=!1;return Be(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function aa(e){return Be(function(t){t=le(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(a,o){var u;try{var f=ia(function(y,$){y?o(y):a($)});t.push(f),u=e.apply(n,t),u&&typeof u.then=="function"&&a(u)}catch(y){o(y)}});return r&&i.then(function(a){r(null,a)},r),i})}function Ro(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var a=n[n.length-1];n[n.length-1]=function(o,u){var f=["api",e.name,t];f=f.concat(o?["error",o]:["success",u]),e.constructor.emit("debug",f),a(o,u)}}}function fe(e,t){return aa(Be(function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return Ro(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise(function(i,a){r.taskqueue.addTask(function(o){o?a(o):i(r[e].apply(r,n))})})}))}function Ft(e,t){for(var n={},r=0,i=t.length;r<i;r++){var a=t[r];a in e&&(n[a]=e[a])}return n}var No=6;function Wr(e){return e}function Do(e){return[{ok:e}]}function oa(e,t,n){var r=t.docs,i=new we;r.forEach(function(O){i.has(O.id)?i.get(O.id).push(O):i.set(O.id,[O])});var a=i.size,o=0,u=new Array(a);function f(){var O=[];u.forEach(function(S){S.docs.forEach(function(g){O.push({id:S.id,docs:[g]})})}),n(null,{results:O})}function y(){++o===a&&f()}function $(O,S,g){u[O]={id:S,docs:g},y()}var s=[];i.forEach(function(O,S){s.push(S)});var m=0;function A(){if(!(m>=s.length)){var O=Math.min(m+No,s.length),S=s.slice(m,O);b(S,m),m+=S.length}}function b(O,S){O.forEach(function(g,v){var c=S+v,l=i.get(g),h=Ft(l[0],["atts_since","attachments"]);h.open_revs=l.map(function(T){return T.rev}),h.open_revs=h.open_revs.filter(Wr);var _=Wr;h.open_revs.length===0&&(delete h.open_revs,_=Do),["revs","attachments","binary","ajax","latest"].forEach(function(T){T in t&&(h[T]=t[T])}),e.get(g,h,function(T,L){var B;T?B=[{error:T}]:B=_(L),$(c,g,B),A()})})}A()}var Kn;try{localStorage.setItem("_pouch_check_localstorage",1),Kn=!!localStorage.getItem("_pouch_check_localstorage")}catch{Kn=!1}function pn(){return Kn}_e(wt,ge);function Mo(e){pn()&&addEventListener("storage",function(t){e.emit(t.key)})}function wt(){ge.call(this),this._listeners={},Mo(this)}wt.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,a=!1;function o(){if(!i._listeners[t])return;if(a){a="waiting";return}a=!0;var u=Ft(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function f(){a=!1}n.changes(u).on("change",function(y){y.seq>r.since&&!r.cancelled&&(r.since=y.seq,r.onChange(y))}).on("complete",function(){a==="waiting"&&pe(o),a=!1}).on("error",f)}this._listeners[t]=o,this.on(e,o)};wt.prototype.removeListener=function(e,t){t in this._listeners&&(ge.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};wt.prototype.notifyLocalWindows=function(e){pn()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};wt.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};function Se(e){if(typeof console!="undefined"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function Fo(e,t){var n=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t=t+1,t>n&&(e=n>>1,t=n);var r=Math.random(),i=t-e;return~~(i*r+e)}function Uo(e){var t=0;return e||(t=2e3),Fo(e,t)}function Qn(e,t){Se("info","The above "+e+" is totally normal. "+t)}var Gn;typeof Object.assign=="function"?Gn=Object.assign:Gn=function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var Ye=Gn;_e(re,Error);function re(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}re.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new re(401,"unauthorized","Name or password is incorrect.");var zo=new re(400,"bad_request","Missing JSON list of 'docs'"),ke=new re(404,"not_found","missing"),yt=new re(409,"conflict","Document update conflict"),ua=new re(400,"bad_request","_id field must contain a string"),Ko=new re(412,"missing_id","_id is required for puts"),Qo=new re(400,"bad_request","Only reserved document ids may start with underscore.");new re(412,"precondition_failed","Database not open");var sa=new re(500,"unknown_error","Database encountered an unknown error"),fa=new re(500,"badarg","Some query argument is invalid");new re(400,"invalid_request","Request was invalid");var Go=new re(400,"query_parse_error","Some query parameter is invalid"),Yr=new re(500,"doc_validation","Bad special document member"),_n=new re(400,"bad_request","Something wrong with the request"),$r=new re(400,"bad_request","Document must be a JSON object");new re(404,"not_found","Database not found");var br=new re(500,"indexed_db_went_bad","unknown");new re(500,"web_sql_went_bad","unknown");new re(500,"levelDB_went_went_bad","unknown");new re(403,"forbidden","Forbidden by design doc validate_doc_update function");var ca=new re(400,"bad_request","Invalid rev format");new re(412,"file_exists","The database could not be created, the file already exists.");var Ho=new re(412,"missing_stub","A pre-existing attachment stub wasn't found");new re(413,"invalid_url","Provided URL is invalid");function V(e,t){function n(r){for(var i=Object.getOwnPropertyNames(e),a=0,o=i.length;a<o;a++)typeof e[i[a]]!="function"&&(this[i[a]]=e[i[a]]);this.stack===void 0&&(this.stack=new Error().stack),r!==void 0&&(this.reason=r)}return n.prototype=re.prototype,new n(t)}function gt(e){if(typeof e!="object"){var t=e;e=sa,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}function Jo(e,t,n){try{return!e(t,n)}catch(i){var r="Filter function threw: "+i.toString();return V(_n,r)}}function Ar(e){var t={},n=e.filter&&typeof e.filter=="function";return t.query=e.query_params,function(i){i.doc||(i.doc={});var a=n&&Jo(e.filter,i.doc,t);if(typeof a=="object")return a;if(a)return!1;if(!e.include_docs)delete i.doc;else if(!e.attachments)for(var o in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,o)&&(i.doc._attachments[o].stub=!0);return!0}}function on(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function la(e){var t;if(e?typeof e!="string"?t=V(ua):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=V(Qo)):t=V(Ko),t)throw t}function qe(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(Se("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function Wo(e,t){return"listenerCount"in e?e.listenerCount(t):ge.listenerCount(e,t)}function Hn(e){if(!e)return null;var t=e.split("/");return t.length===2?t:t.length===1?[e,e]:null}function Xr(e){var t=Hn(e);return t?t.join("/"):null}var Zr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Vr="queryKey",Yo=/(?:^|&)([^&=]*)=?([^&]*)/g,Xo=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function da(e){for(var t=Xo.exec(e),n={},r=14;r--;){var i=Zr[r],a=t[r]||"",o=["user","password"].indexOf(i)!==-1;n[i]=o?decodeURIComponent(a):a}return n[Vr]={},n[Zr[12]].replace(Yo,function(u,f,y){f&&(n[Vr][f]=y)}),n}function Sr(e,t){var n=[],r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function mn(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,a=n(r);return a?(a._id=t,a._rev=i,Zo(e,a,n)):{updated:!1,rev:i}})}function Zo(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return mn(e,t._id,n)})}var Or=function(e){return atob(e)},Ut=function(e){return btoa(e)};function xr(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if(a.name!=="TypeError")throw a;for(var n=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function Vo(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function Er(e,t){return xr([Vo(e)],{type:t})}function Cr(e,t){return Er(Or(e),t)}function eu(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function va(e,t){var n=new FileReader,r=typeof n.readAsBinaryString=="function";n.onloadend=function(i){var a=i.target.result||"";if(r)return t(a);t(eu(a))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function ha(e,t){va(e,function(n){t(n)})}function kr(e,t){ha(e,function(n){t(Ut(n))})}function tu(e,t){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);t(i)},n.readAsArrayBuffer(e)}var nu=self.setImmediate||self.setTimeout,ru=32768;function iu(e){return Ut(e)}function au(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}function ou(e,t,n,r,i){(n>0||r<t.size)&&(t=au(t,n,r)),tu(t,function(a){e.append(a),i()})}function uu(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function Tr(e,t){var n=typeof e=="string",r=n?e.length:e.size,i=Math.min(ru,r),a=Math.ceil(r/i),o=0,u=n?new an:new an.ArrayBuffer,f=n?uu:ou;function y(){nu(s)}function $(){var m=u.end(!0),A=iu(m);t(A),u.destroy()}function s(){var m=o*i,A=m+i;o++,o<a?f(u,e,m,A,y):f(u,e,m,A,$)}s()}function ya(e){return an.hash(e)}function ga(e,t){if(!t)return Gi().replace(/-/g,"").toLowerCase();var n=Ye({},e);return delete n._rev_tree,ya(JSON.stringify(n))}var wn=Gi;function Xe(e){for(var t,n,r,i=e.rev_tree.slice(),a;a=i.pop();){var o=a.ids,u=o[2],f=a.pos;if(u.length){for(var y=0,$=u.length;y<$;y++)i.push({pos:f+1,ids:u[y]});continue}var s=!!o[1].deleted,m=o[0];(!t||(r!==s?r:n!==f?n<f:t<m))&&(t=m,n=f,r=s)}return n+"-"+t}function rt(e,t){for(var n=e.slice(),r;r=n.pop();)for(var i=r.pos,a=r.ids,o=a[2],u=t(o.length===0,i,a[0],r.ctx,a[1]),f=0,y=o.length;f<y;f++)n.push({pos:i+1,ids:o[f],ctx:u})}function su(e,t){return e.pos-t.pos}function Ir(e){var t=[];rt(e,function(i,a,o,u,f){i&&t.push({rev:a+"-"+o,pos:a,opts:f})}),t.sort(su).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function Pr(e){for(var t=Xe(e),n=Ir(e.rev_tree),r=[],i=0,a=n.length;i<a;i++){var o=n[i];o.rev!==t&&!o.opts.deleted&&r.push(o.rev)}return r}function fu(e){var t=[];return rt(e.rev_tree,function(n,r,i,a,o){o.status==="available"&&!n&&(t.push(r+"-"+i),o.status="missing")}),t}function pa(e){for(var t=[],n=e.slice(),r;r=n.pop();){var i=r.pos,a=r.ids,o=a[0],u=a[1],f=a[2],y=f.length===0,$=r.history?r.history.slice():[];$.push({id:o,opts:u}),y&&t.push({pos:i+1-$.length,ids:$});for(var s=0,m=f.length;s<m;s++)n.push({pos:i+1,ids:f[s],history:$})}return t.reverse()}function cu(e,t){return e.pos-t.pos}function lu(e,t,n){for(var r=0,i=e.length,a;r<i;)a=r+i>>>1,n(e[a],t)<0?r=a+1:i=a;return r}function du(e,t,n){var r=lu(e,t,n);e.splice(r,0,t)}function ei(e,t){for(var n,r,i=t,a=e.length;i<a;i++){var o=e[i],u=[o.id,o.opts,[]];r?(r[2].push(u),r=u):n=r=u}return n}function vu(e,t){return e[0]<t[0]?-1:1}function ti(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),a=i.tree1,o=i.tree2;(a[1].status||o[1].status)&&(a[1].status=a[1].status==="available"||o[1].status==="available"?"available":"missing");for(var u=0;u<o[2].length;u++){if(!a[2][0]){r="new_leaf",a[2][0]=o[2][u];continue}for(var f=!1,y=0;y<a[2].length;y++)a[2][y][0]===o[2][u][0]&&(n.push({tree1:a[2][y],tree2:o[2][u]}),f=!0);f||(r="new_branch",du(a[2],o[2][u],vu))}}return{conflicts:r,tree:e}}function _a(e,t,n){var r=[],i=!1,a=!1,o;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,f=e.length;u<f;u++){var y=e[u];if(y.pos===t.pos&&y.ids[0]===t.ids[0])o=ti(y.ids,t.ids),r.push({pos:y.pos,ids:o.tree}),i=i||o.conflicts,a=!0;else if(n!==!0){var $=y.pos<t.pos?y:t,s=y.pos<t.pos?t:y,m=s.pos-$.pos,A=[],b=[];for(b.push({ids:$.ids,diff:m,parent:null,parentIdx:null});b.length>0;){var O=b.pop();if(O.diff===0){O.ids[0]===s.ids[0]&&A.push(O);continue}for(var S=O.ids[2],g=0,v=S.length;g<v;g++)b.push({ids:S[g],diff:O.diff-1,parent:O.ids,parentIdx:g})}var c=A[0];c?(o=ti(c.ids,s.ids),c.parent[2][c.parentIdx]=o.tree,r.push({pos:$.pos,ids:$.ids}),i=i||o.conflicts,a=!0):r.push(y)}else r.push(y)}return a||r.push(t),r.sort(cu),{tree:r,conflicts:i||"internal_node"}}function hu(e,t){for(var n=pa(e),r,i,a=0,o=n.length;a<o;a++){var u=n[a],f=u.ids,y;if(f.length>t){r||(r={});var $=f.length-t;y={pos:u.pos+$,ids:ei(f,$)};for(var s=0;s<$;s++){var m=u.pos+s+"-"+f[s].id;r[m]=!0}}else y={pos:u.pos,ids:ei(f,0)};i?i=_a(i,y,!0).tree:i=[y]}return r&&rt(i,function(A,b,O){delete r[b+"-"+O]}),{tree:i,revs:r?Object.keys(r):[]}}function ma(e,t,n){var r=_a(e,t),i=hu(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function yu(e,t){for(var n=e.slice(),r=t.split("-"),i=parseInt(r[0],10),a=r[1],o;o=n.pop();){if(o.pos===i&&o.ids[0]===a)return!0;for(var u=o.ids[2],f=0,y=u.length;f<y;f++)n.push({pos:o.pos+1,ids:u[f]})}return!1}function gu(e){return e.ids}function je(e,t){t||(t=Xe(e));for(var n=t.substring(t.indexOf("-")+1),r=e.rev_tree.map(gu),i;i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function Ze(e){return/^_local/.test(e)}function pu(e,t){for(var n=t.rev_tree.slice(),r;r=n.pop();){var i=r.pos,a=r.ids,o=a[0],u=a[1],f=a[2],y=f.length===0,$=r.history?r.history.slice():[];if($.push({id:o,pos:i,opts:u}),y)for(var s=0,m=$.length;s<m;s++){var A=$[s],b=A.pos+"-"+A.id;if(b===e)return i+"-"+o}for(var O=0,S=f.length;O<S;O++)n.push({pos:i+1,ids:f[O],history:$})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}_e(zt,ge);function _u(e,t,n,r){try{e.emit("change",t,n,r)}catch(i){Se("error",'Error in .on("change", function):',i)}}function zt(e,t,n){ge.call(this);var r=this;this.db=e,t=t?le(t):{};var i=t.complete=ia(function(u,f){u?Wo(r,"error")>0&&r.emit("error",u):r.emit("complete",f),r.removeAllListeners(),e.removeListener("destroyed",a)});n&&(r.on("complete",function(u){n(null,u)}),r.on("error",n));function a(){r.cancel()}e.once("destroyed",a),t.onChange=function(u,f,y){r.isCancelled||_u(r,u,f,y)};var o=new Promise(function(u,f){t.complete=function(y,$){y?f(y):u($)}});r.once("cancel",function(){e.removeListener("destroyed",a),t.complete(null,{status:"cancelled"})}),this.then=o.then.bind(o),this.catch=o.catch.bind(o),this.then(function(u){i(null,u)},i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask(function(u){u?t.complete(u):r.isCancelled?r.emit("cancel"):r.validateChanges(t)})}zt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")};function mu(e,t,n){var r=[{rev:e._rev}];n.style==="all_docs"&&(r=Ir(t.rev_tree).map(function(a){return{rev:a.rev}}));var i={id:t.id,changes:r,doc:e};return je(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Pr(t),i.doc._conflicts.length||delete i.doc._conflicts),i}zt.prototype.validateChanges=function(e){var t=e.complete,n=this;W._changesFilterPlugin?W._changesFilterPlugin.validate(e,function(r){if(r)return t(r);n.doChanges(e)}):n.doChanges(e)};zt.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=le(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=mu,e.since==="latest"&&(e.since="now"),e.since||(e.since=0),e.since==="now"){this.db.info().then(function(a){if(t.isCancelled){n(null,{status:"cancelled"});return}e.since=a.update_seq,t.doChanges(e)},n);return}if(W._changesFilterPlugin){if(W._changesFilterPlugin.normalize(e),W._changesFilterPlugin.shouldFilter(this,e))return W._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(a){a in e&&Se("warn",'The "'+a+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=e.limit===0?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&typeof r.cancel=="function"){var i=t.cancel;t.cancel=Be(function(a){r.cancel(),i.apply(this,a)})}};function ni(e,t){return e<t?-1:e>t?1:0}function qr(e,t){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=t,e(n)):e(null,r.length?r[0]:r)}}function wu(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var a=r[i];n._attachments[a]=Ft(n._attachments[a],["data","digest","content_type","length","revpos","stub"])}}}function $u(e,t){var n=ni(e._id,t._id);if(n!==0)return n;var r=e._revisions?e._revisions.start:0,i=t._revisions?t._revisions.start:0;return ni(r,i)}function bu(e){var t={},n=[];return rt(e,function(r,i,a,o){var u=i+"-"+a;return r&&(t[u]=0),o!==void 0&&n.push({from:o,to:u}),u}),n.reverse(),n.forEach(function(r){t[r.from]===void 0?t[r.from]=1+t[r.to]:t[r.from]=Math.min(t[r.from],1+t[r.to])}),t}function Au(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}function wa(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),e._compact(n,function(a,o){a?r(a):r(null,o),pe(function(){e._compactionQueue.shift(),e._compactionQueue.length&&wa(e)})})})}function Su(e){return e.charAt(0)==="_"?e+" is not a valid attachment name, attachment names cannot start with '_'":!1}_e(ae,ge);function ae(){ge.call(this);for(var e in ae.prototype)typeof this[e]=="function"&&(this[e]=this[e].bind(this))}ae.prototype.post=fe("post",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="object"||Array.isArray(e))return n(V($r));this.bulkDocs({docs:[e]},t,qr(n,e._id))});ae.prototype.put=fe("put",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="object"||Array.isArray(e))return n(V($r));if(la(e._id),Ze(e._id)&&typeof this._putLocal=="function")return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r=this;t.force&&e._rev?(i(),a(function(o){var u=o?null:{ok:!0,id:e._id,rev:e._rev};n(o,u)})):a(n);function i(){var o=e._rev.split("-"),u=o[1],f=parseInt(o[0],10),y=f+1,$=ga();e._revisions={start:y,ids:[$,u]},e._rev=y+"-"+$,t.new_edits=!1}function a(o){typeof r._put=="function"&&t.new_edits!==!1?r._put(e,t,o):r.bulkDocs({docs:[e]},t,qr(o,e._id))}});ae.prototype.putAttachment=fe("putAttachment",function(e,t,n,r,i){var a=this;typeof i=="function"&&(i=r,r=n,n=null),typeof i=="undefined"&&(i=r,r=n,n=null),i||Se("warn","Attachment",t,"on document",e,"is missing content_type");function o(u){var f="_rev"in u?parseInt(u._rev,10):0;return u._attachments=u._attachments||{},u._attachments[t]={content_type:i,data:r,revpos:++f},a.put(u)}return a.get(e).then(function(u){if(u._rev!==n)throw V(yt);return o(u)},function(u){if(u.reason===ke.message)return o({_id:e});throw u})});ae.prototype.removeAttachment=fe("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(a,o){if(a){r(a);return}if(o._rev!==n){r(V(yt));return}if(!o._attachments)return r();delete o._attachments[t],Object.keys(o._attachments).length===0&&delete o._attachments,i.put(o,r)})});ae.prototype.remove=fe("remove",function(e,t,n,r){var i;typeof t=="string"?(i={_id:e,_rev:t},typeof n=="function"&&(r=n,n={})):(i=e,typeof t=="function"?(r=t,n={}):(r=n,n=t)),n=n||{},n.was_delete=!0;var a={_id:i._id,_rev:i._rev||n.rev};if(a._deleted=!0,Ze(a._id)&&typeof this._removeLocal=="function")return this._removeLocal(i,r);this.bulkDocs({docs:[a]},n,qr(r,a._id))});ae.prototype.revsDiff=fe("revsDiff",function(e,t,n){typeof t=="function"&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,a=new we;function o(f,y){a.has(f)||a.set(f,{missing:[]}),a.get(f).missing.push(y)}function u(f,y){var $=e[f].slice(0);rt(y,function(s,m,A,b,O){var S=m+"-"+A,g=$.indexOf(S);g!==-1&&($.splice(g,1),O.status!=="available"&&o(f,S))}),$.forEach(function(s){o(f,s)})}r.map(function(f){this._getRevisionTree(f,function(y,$){if(y&&y.status===404&&y.message==="missing")a.set(f,{missing:e[f]});else{if(y)return n(y);u(f,$)}if(++i===r.length){var s={};return a.forEach(function(m,A){s[A]=m}),n(null,s)}})},this)});ae.prototype.bulkGet=fe("bulkGet",function(e,t){oa(this,e,t)});ae.prototype.compactDocument=fe("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,a){if(i)return n(i);var o=bu(a),u=[],f=[];Object.keys(o).forEach(function(y){o[y]>t&&u.push(y)}),rt(a,function(y,$,s,m,A){var b=$+"-"+s;A.status==="available"&&u.indexOf(b)!==-1&&f.push(b)}),r._doCompaction(e,f,n)})});ae.prototype.compact=fe("compact",function(e,t){typeof e=="function"&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),n._compactionQueue.length===1&&wa(n)});ae.prototype._compact=function(e,t){var n=this,r={return_docs:!1,last_seq:e.last_seq||0},i=[];function a(u){i.push(n.compactDocument(u.id,0))}function o(u){var f=u.last_seq;Promise.all(i).then(function(){return mn(n,"_local/compaction",function($){return!$.last_seq||$.last_seq<f?($.last_seq=f,$):!1})}).then(function(){t(null,{ok:!0})}).catch(t)}n.changes(r).on("change",a).on("complete",o).on("error",t)};ae.prototype.get=fe("get",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="string")return n(V(ua));if(Ze(e)&&typeof this._getLocal=="function")return this._getLocal(e,n);var r=[],i=this;function a(){var f=[],y=r.length;if(!y)return n(null,f);r.forEach(function($){i.get(e,{rev:$,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(s,m){if(s)f.push({missing:$});else{for(var A,b=0,O=f.length;b<O;b++)if(f[b].ok&&f[b].ok._rev===m._rev){A=!0;break}A||f.push({ok:m})}y--,y||n(null,f)})})}if(t.open_revs){if(t.open_revs==="all")this._getRevisionTree(e,function(f,y){if(f)return n(f);r=Ir(y).map(function($){return $.rev}),a()});else if(Array.isArray(t.open_revs)){r=t.open_revs;for(var o=0;o<r.length;o++){var u=r[o];if(!(typeof u=="string"&&/^\d+-/.test(u)))return n(V(ca))}a()}else return n(V(sa,"function_clause"));return}return this._get(e,t,function(f,y){if(f)return f.docId=e,n(f);var $=y.doc,s=y.metadata,m=y.ctx;if(t.conflicts){var A=Pr(s);A.length&&($._conflicts=A)}if(je(s,$._rev)&&($._deleted=!0),t.revs||t.revs_info){for(var b=$._rev.split("-"),O=parseInt(b[0],10),S=b[1],g=pa(s.rev_tree),v=null,c=0;c<g.length;c++){var l=g[c],h=l.ids.map(function(Y){return Y.id}).indexOf(S),_=h===O-1;(_||!v&&h!==-1)&&(v=l)}if(!v)return f=new Error("invalid rev tree"),f.docId=e,n(f);var T=v.ids.map(function(Y){return Y.id}).indexOf($._rev.split("-")[1])+1,L=v.ids.length-T;if(v.ids.splice(T,L),v.ids.reverse(),t.revs&&($._revisions={start:v.pos+v.ids.length-1,ids:v.ids.map(function(Y){return Y.id})}),t.revs_info){var B=v.pos+v.ids.length;$._revs_info=v.ids.map(function(Y){return B--,{rev:B+"-"+Y.id,status:Y.opts.status}})}}if(t.attachments&&$._attachments){var R=$._attachments,K=Object.keys(R).length;if(K===0)return n(null,$);Object.keys(R).forEach(function(Y){this._getAttachment($._id,Y,R[Y],{rev:$._rev,binary:t.binary,ctx:m},function(Q,H){var U=$._attachments[Y];U.data=H,delete U.stub,delete U.length,--K||n(null,$)})},i)}else{if($._attachments)for(var Z in $._attachments)Object.prototype.hasOwnProperty.call($._attachments,Z)&&($._attachments[Z].stub=!0);n(null,$)}})});ae.prototype.getAttachment=fe("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(a,o){if(a)return r(a);if(o.doc._attachments&&o.doc._attachments[t])n.ctx=o.ctx,n.binary=!0,i._getAttachment(e,t,o.doc._attachments[t],n,r);else return r(V(ke))})});ae.prototype.allDocs=fe("allDocs",function(e,t){if(typeof e=="function"&&(t=e,e={}),e.skip=typeof e.skip!="undefined"?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(r){return r in e})[0];if(n){t(V(Go,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!qe(this)&&(Au(e),e.keys.length===0))return this._allDocs({limit:0},t)}return this._allDocs(e,t)});ae.prototype.changes=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},e.return_docs="return_docs"in e?e.return_docs:!e.live,new zt(this,e,t)};ae.prototype.close=fe("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)});ae.prototype.info=fe("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!!(t.auto_compaction&&!qe(t)),r.adapter=t.adapter,e(null,r)})});ae.prototype.id=fe("id",function(e){return this._id(e)});ae.prototype.type=function(){return typeof this._type=="function"?this._type():this.adapter};ae.prototype.bulkDocs=fe("bulkDocs",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(V(zo));for(var r=0;r<e.docs.length;++r)if(typeof e.docs[r]!="object"||Array.isArray(e.docs[r]))return n(V($r));var i;if(e.docs.forEach(function(u){u._attachments&&Object.keys(u._attachments).forEach(function(f){i=i||Su(f),u._attachments[f].content_type||Se("warn","Attachment",f,"on document",u._id,"is missing content_type")})}),i)return n(V(_n,i));"new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0);var a=this;!t.new_edits&&!qe(a)&&e.docs.sort($u),wu(e.docs);var o=e.docs.map(function(u){return u._id});return this._bulkDocs(e,t,function(u,f){if(u)return n(u);if(t.new_edits||(f=f.filter(function(s){return s.error})),!qe(a))for(var y=0,$=f.length;y<$;y++)f[y].id=f[y].id||o[y];n(null,f)})});ae.prototype.registerDependentDatabase=fe("registerDependentDatabase",function(e,t){var n=le(this.__opts);this.__opts.view_adapter&&(n.adapter=this.__opts.view_adapter);var r=new this.constructor(e,n);function i(a){return a.dependentDbs=a.dependentDbs||{},a.dependentDbs[e]?!1:(a.dependentDbs[e]=!0,a)}mn(this,"_local/_pouch_dependentDbs",i).then(function(){t(null,{db:r})}).catch(t)});ae.prototype.destroy=fe("destroy",function(e,t){typeof e=="function"&&(t=e,e={});var n=this,r="use_prefix"in n?n.use_prefix:!0;function i(){n._destroy(e,function(a,o){if(a)return t(a);n._destroyed=!0,n.emit("destroyed"),t(null,o||{ok:!0})})}if(qe(n))return i();n.get("_local/_pouch_dependentDbs",function(a,o){if(a)return a.status!==404?t(a):i();var u=o.dependentDbs,f=n.constructor,y=Object.keys(u).map(function($){var s=r?$.replace(new RegExp("^"+f.prefix),""):$;return new f(s,n.__opts).destroy()});Promise.all(y).then(i,t)})});function Kt(){this.isReady=!1,this.failed=!1,this.queue=[]}Kt.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()};Kt.prototype.fail=function(e){this.failed=e,this.execute()};Kt.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()};Kt.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()};function Ou(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=W.adapters,i=W.preferredAdapters,a=W.prefix,o=t.adapter;if(!o)for(var u=0;u<i.length;++u){if(o=i[u],o==="idb"&&"websql"in r&&pn()&&localStorage["_pouch__websqldb_"+a+e]){Se("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}var f=r[o],y=f&&"use_prefix"in f?f.use_prefix:!0;return{name:y?a+e:e,adapter:o}}function xu(e){function t(r){e.removeListener("closed",n),r||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}_e(W,ae);function W(e,t){if(!(this instanceof W))return new W(e,t);var n=this;if(t=t||{},e&&typeof e=="object"&&(t=e,e=t.name,delete t.name),t.deterministic_revs===void 0&&(t.deterministic_revs=!0),this.__opts=t=le(t),n.auto_compaction=t.auto_compaction,n.prefix=W.prefix,typeof e!="string")throw new Error("Missing/invalid DB name");var r=(t.prefix||"")+e,i=Ou(r,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,n.name=e,n._adapter=t.adapter,W.emit("debug",["adapter","Picked adapter: ",t.adapter]),!W.adapters[t.adapter]||!W.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);if(t.view_adapter&&(!W.adapters[t.view_adapter]||!W.adapters[t.view_adapter].valid()))throw new Error("Invalid View Adapter: "+t.view_adapter);ae.call(n),n.taskqueue=new Kt,n.adapter=t.adapter,W.adapters[t.adapter].call(n,t,function(a){if(a)return n.taskqueue.fail(a);xu(n),n.emit("created",n),W.emit("created",n.name),n.taskqueue.ready(n)})}var Eu=typeof AbortController!="undefined"?AbortController:function(){return{abort:function(){}}},$a=fetch,ct=Headers;W.adapters={};W.preferredAdapters=[];W.prefix="_pouch_";var ri=new ge;function Cu(e){Object.keys(ge.prototype).forEach(function(n){typeof ge.prototype[n]=="function"&&(e[n]=ri[n].bind(ri))});var t=e._destructionListeners=new we;e.on("ref",function(r){t.has(r.name)||t.set(r.name,[]),t.get(r.name).push(r)}),e.on("unref",function(r){if(!!t.has(r.name)){var i=t.get(r.name),a=i.indexOf(r);a<0||(i.splice(a,1),i.length>1?t.set(r.name,i):t.delete(r.name))}}),e.on("destroyed",function(r){if(!!t.has(r)){var i=t.get(r);t.delete(r),i.forEach(function(a){a.emit("destroyed",!0)})}})}Cu(W);W.adapter=function(e,t,n){t.valid()&&(W.adapters[e]=t,n&&W.preferredAdapters.push(e))};W.plugin=function(e){if(typeof e=="function")e(W);else{if(typeof e!="object"||Object.keys(e).length===0)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){W.prototype[t]=e[t]})}return this.__defaults&&(W.__defaults=Ye({},this.__defaults)),W};W.defaults=function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);r=r||{},n&&typeof n=="object"&&(r=n,n=r.name,delete r.name),r=Ye({},t.__defaults,r),W.call(this,n,r)}return _e(t,W),t.preferredAdapters=W.preferredAdapters.slice(),Object.keys(W).forEach(function(n){n in t||(t[n]=W[n])}),t.__defaults=Ye({},this.__defaults,e),t};W.fetch=function(e,t){return $a(e,t)};var ku="7.3.0";function jr(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var a=t[r];if(n=n[a],!n)break}return n}function Tu(e,t){return e<t?-1:e>t?1:0}function Br(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var a=e[r];r>0&&e[r-1]==="\\"&&(a==="$"||a===".")?n=n.substring(0,n.length-1)+a:a==="."?(t.push(n),n=""):n+=a}return t.push(n),t}var Iu=["$or","$nor","$not"];function ba(e){return Iu.indexOf(e)>-1}function Aa(e){return Object.keys(e)[0]}function Pu(e){return e[Aa(e)]}function Pt(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var a=r[i];if(typeof a!="object"&&(a={$eq:a}),ba(i))if(a instanceof Array){if(n[i]){n[i]=!1,t[i]=a;return}var o=[];t[i].forEach(function(f){Object.keys(a).forEach(function(y){var $=a[y],s=Math.max(Object.keys(f).length,Object.keys($).length),m=Pt([f,$]);Object.keys(m).length<=s||o.push(m)})}),t[i]=o}else t[i]=Pt([a]);else{var u=t[i]=t[i]||{};Object.keys(a).forEach(function(f){var y=a[f];if(f==="$gt"||f==="$gte")return qu(f,y,u);if(f==="$lt"||f==="$lte")return ju(f,y,u);if(f==="$ne")return Bu(y,u);if(f==="$eq")return Lu(y,u);if(f==="$regex")return Ru(y,u);u[f]=y})}})}),t}function qu(e,t,n){typeof n.$eq=="undefined"&&(typeof n.$gte!="undefined"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt!="undefined"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function ju(e,t,n){typeof n.$eq=="undefined"&&(typeof n.$lte!="undefined"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt!="undefined"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function Bu(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function Lu(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function Ru(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function Sa(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=Pt(e[n].$and));var r=e[t];typeof r=="object"&&Sa(r)}return e}function Oa(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=Oa(r,t))}return t}function Nu(e){var t=le(e),n=!1;Oa(t,!1)&&(t=Sa(t),"$and"in t&&(t=Pt(t.$and)),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(f){for(var y=Object.keys(f),$=0;$<y.length;$++){var s=y[$],m=f[s];(typeof m!="object"||m===null)&&(f[s]={$eq:m})}})}),"$not"in t&&(t.$not=Pt([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var a=r[i],o=t[a];typeof o!="object"||o===null?o={$eq:o}:n||("$ne"in o&&(o.$ne=[o.$ne]),"$regex"in o&&(o.$regex=[o.$regex])),t[a]=o}return t}function Du(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function Mu(e,t,n){var r=Du(e,t,n);return r+e}var xa=-324,Jn=3,Wn="";function oe(e,t){if(e===t)return 0;e=Ve(e),t=Ve(t);var n=Yn(e),r=Yn(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return Gu(e,t)}return Array.isArray(e)?Qu(e,t):Hu(e,t)}function Ve(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Ve(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];typeof a!="undefined"&&(e[i]=Ve(a))}}}}return e}function Fu(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return Ju(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,a="";if(t)for(;++r<i;)a+=xe(n[r]);else for(;++r<i;){var o=n[r];a+=xe(o)+xe(e[o])}return a}return""}function xe(e){var t="\0";return e=Ve(e),Yn(e)+Wn+Fu(e)+t}function Uu(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var a=e[t]==="0";t++;var o="",u=e.substring(t,t+Jn),f=parseInt(u,10)+xa;for(a&&(f=-f),t+=Jn;;){var y=e[t];if(y==="\0")break;o+=y,t++}o=o.split("."),o.length===1?r=parseInt(o,10):r=parseFloat(o[0]+"."+o[1]),a&&(r=r-10),f!==0&&(r=parseFloat(r+"e"+f))}return{num:r,length:t-n}}function zu(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(n);else if(a===e.length-2){var o=e.pop();i[o]=n}else e.push(n)}}function Ku(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();zu(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var a=Uu(e,r);t.push(a.num),r+=a.length;break;case"4":for(var o="";;){var u=e[r];if(u==="\0")break;o+=u,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(o);break;case"5":var f={element:[],index:t.length};t.push(f.element),n.push(f);break;case"6":var y={element:{},index:t.length};t.push(y.element),n.push(y);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function Qu(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=oe(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function Gu(e,t){return e===t?0:e>t?1:-1}function Hu(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),a=0;a<i;a++){var o=oe(n[a],r[a]);if(o!==0||(o=oe(e[n[a]],t[r[a]]),o!==0))return o}return n.length===r.length?0:n.length>r.length?1:-1}function Yn(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function Ju(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",a=(r?-n:n)-xa,o=Mu(a.toString(),"0",Jn);i+=Wn+o;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var f=u.toFixed(20);return f=f.replace(/\.?0+$/,""),i+=Wn+f,i}function Wu(e){function t(n){return e.map(function(r){var i=Aa(r),a=Br(i),o=jr(n,a);return o})}return function(n,r){var i=t(n.doc),a=t(r.doc),o=oe(i,a);return o!==0?o:Tu(n.doc._id,r.doc._id)}}function Yu(e,t,n){if(e=e.filter(function(o){return lt(o.doc,t.selector,n)}),t.sort){var r=Wu(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&Pu(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,a=("limit"in t?t.limit:e.length)+i;e=e.slice(i,a)}return e}function lt(e,t,n){return n.every(function(r){var i=t[r],a=Br(r),o=jr(e,a);return ba(r)?Xu(r,i,e):un(i,e,a,o)})}function un(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var a=e[i];if(i.indexOf("$")===0)return ii(i,t,a,n,r);var o=Br(i);if(r===void 0&&typeof a!="object"&&o.length>0)return!1;var u=jr(r,o);return typeof a=="object"?un(a,t,n,u):ii("$eq",t,a,o,u)}):e===r:!0}function Xu(e,t,n){return e==="$or"?t.some(function(r){return lt(n,r,Object.keys(r))}):e==="$not"?!lt(n,t,Object.keys(t)):!t.find(function(r){return lt(n,r,Object.keys(r))})}function ii(e,t,n,r,i){if(!oi[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return oi[e](t,n,r,i)}function Ot(e){return typeof e!="undefined"&&e!==null}function Fe(e){return typeof e!="undefined"}function Zu(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function ai(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return oe(n,r)===0}):oe(n,e)===0})}function Vu(e,t){return t.every(function(n){return e.some(function(r){return oe(n,r)===0})})}function es(e,t){return e.length===t}function ts(e,t){var n=new RegExp(t);return n.test(e)}function ns(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var oi={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.some(function(i){return lt(i,t,Object.keys(t))}):r.some(function(i){return un(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.every(function(i){return lt(i,t,Object.keys(t))}):r.every(function(i){return un(t,e,n,i)})},$eq:function(e,t,n,r){return Fe(r)&&oe(r,t)===0},$gte:function(e,t,n,r){return Fe(r)&&oe(r,t)>=0},$gt:function(e,t,n,r){return Fe(r)&&oe(r,t)>0},$lte:function(e,t,n,r){return Fe(r)&&oe(r,t)<=0},$lt:function(e,t,n,r){return Fe(r)&&oe(r,t)<0},$exists:function(e,t,n,r){return t?Fe(r):!Fe(r)},$mod:function(e,t,n,r){return Ot(r)&&Zu(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return oe(r,i)!==0})},$in:function(e,t,n,r){return Ot(r)&&ai(r,t)},$nin:function(e,t,n,r){return Ot(r)&&!ai(r,t)},$size:function(e,t,n,r){return Ot(r)&&Array.isArray(r)&&es(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&Vu(r,t)},$regex:function(e,t,n,r){return Ot(r)&&typeof r=="string"&&t.every(function(i){return ts(r,i)})},$type:function(e,t,n,r){return ns(r,t)}};function rs(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=Nu(t);var n={doc:e},r=Yu([n],{selector:t},Object.keys(t));return r&&r.length===1}function is(e){return Sr(`"use strict";
return `+e+";",{})}function as(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join(`
`);return Sr(t,{})}function os(e,t){if(e.selector&&e.filter&&e.filter!=="_selector"){var n=typeof e.filter=="string"?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function us(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&typeof e.filter=="string"&&(e.filter==="_view"?e.view=Xr(e.view):e.filter=Xr(e.filter))}function ss(e,t){return t.filter&&typeof t.filter=="string"&&!t.doc_ids&&!qe(e.db)}function fs(e,t){var n=t.complete;if(t.filter==="_view"){if(!t.view||typeof t.view!="string"){var r=V(_n,"`view` filter parameter not found or invalid.");return n(r)}var i=Hn(t.view);e.db.get("_design/"+i[0],function(o,u){if(e.isCancelled)return n(null,{status:"cancelled"});if(o)return n(gt(o));var f=u&&u.views&&u.views[i[1]]&&u.views[i[1]].map;if(!f)return n(V(ke,u.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=as(f),e.doChanges(t)})}else if(t.selector)t.filter=function(o){return rs(o,t.selector)},e.doChanges(t);else{var a=Hn(t.filter);e.db.get("_design/"+a[0],function(o,u){if(e.isCancelled)return n(null,{status:"cancelled"});if(o)return n(gt(o));var f=u&&u.filters&&u.filters[a[1]];if(!f)return n(V(ke,u&&u.filters?"missing json key: "+a[1]:"missing json key: filters"));t.filter=is(f),e.doChanges(t)})}}function cs(e){e._changesFilterPlugin={validate:os,normalize:us,shouldFilter:ss,filter:fs}}W.plugin(cs);W.version=ku;function Ea(e){return e.reduce(function(t,n){return t[n]=!0,t},{})}var ls=Ea(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ds=Ea(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function ui(e){if(!/^\d+-/.test(e))return V(ca);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function vs(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],a=1,o=r.length;a<o;a++)i=[r[a],{status:"missing"},[i]];return[{pos:n,ids:i}]}function Ca(e,t,n){n||(n={deterministic_revs:!0});var r,i,a,o={status:"available"};if(e._deleted&&(o.deleted=!0),t)if(e._id||(e._id=wn()),i=ga(e,n.deterministic_revs),e._rev){if(a=ui(e._rev),a.error)return a;e._rev_tree=[{pos:a.prefix,ids:[a.id,{status:"missing"},[[i,o,[]]]]}],r=a.prefix+1}else e._rev_tree=[{pos:1,ids:[i,o,[]]}],r=1;else if(e._revisions&&(e._rev_tree=vs(e._revisions,o),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if(a=ui(e._rev),a.error)return a;r=a.prefix,i=a.id,e._rev_tree=[{pos:r,ids:[i,o,[]]}]}la(e._id),e._rev=r+"-"+i;var u={metadata:{},data:{}};for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var y=f[0]==="_";if(y&&!ls[f]){var $=V(Yr,f);throw $.message=Yr.message+": "+f,$}else y&&!ds[f]?u.metadata[f.slice(1)]=e[f]:u.data[f]=e[f]}return u}function hs(e){try{return Or(e)}catch{var t=V(fa,"Attachment is not a valid base64 string");return{error:t}}}function ys(e,t,n){var r=hs(e.data);if(r.error)return n(r.error);e.length=r.length,t==="blob"?e.data=Er(r,e.content_type):t==="base64"?e.data=Ut(r):e.data=r,Tr(r,function(i){e.digest="md5-"+i,n()})}function gs(e,t,n){Tr(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,t==="binary"?ha(e.data,function(i){e.data=i,n()}):t==="base64"?kr(e.data,function(i){e.data=i,n()}):n()})}function ps(e,t,n){if(e.stub)return n();typeof e.data=="string"?ys(e,t,n):gs(e,t,n)}function _s(e,t,n){if(!e.length)return n();var r=0,i;e.forEach(function(o){var u=o.data&&o.data._attachments?Object.keys(o.data._attachments):[],f=0;if(!u.length)return a();function y(s){i=s,f++,f===u.length&&a()}for(var $ in o.data._attachments)Object.prototype.hasOwnProperty.call(o.data._attachments,$)&&ps(o.data._attachments[$],t,y)});function a(){r++,e.length===r&&(i?n(i):n())}}function ms(e,t,n,r,i,a,o,u){if(yu(t.rev_tree,n.metadata.rev)&&!u)return r[i]=n,a();var f=t.winningRev||Xe(t),y="deleted"in t?t.deleted:je(t,f),$="deleted"in n.metadata?n.metadata.deleted:je(n.metadata),s=/^1-/.test(n.metadata.rev);if(y&&!$&&u&&s){var m=n.data;m._rev=f,m._id=n.metadata.id,n=Ca(m,u)}var A=ma(t.rev_tree,n.metadata.rev_tree[0],e),b=u&&(y&&$&&A.conflicts!=="new_leaf"||!y&&A.conflicts!=="new_leaf"||y&&!$&&A.conflicts==="new_branch");if(b){var O=V(yt);return r[i]=O,a()}var S=n.metadata.rev;n.metadata.rev_tree=A.tree,n.stemmedRevs=A.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var g=Xe(n.metadata),v=je(n.metadata,g),c=y===v?0:y<v?-1:1,l;S===g?l=v:l=je(n.metadata,S),o(n,g,v,l,!0,c,i,a)}function ws(e){return e.metadata.rev_tree[0].ids[1].status==="missing"}function $s(e,t,n,r,i,a,o,u,f){e=e||1e3;function y(O,S,g){var v=Xe(O.metadata),c=je(O.metadata,v);if("was_delete"in u&&c)return a[S]=V(ke,"deleted"),g();var l=$&&ws(O);if(l){var h=V(yt);return a[S]=h,g()}var _=c?0:1;o(O,v,c,c,!1,_,S,g)}var $=u.new_edits,s=new we,m=0,A=t.length;function b(){++m===A&&f&&f()}t.forEach(function(O,S){if(O._id&&Ze(O._id)){var g=O._deleted?"_removeLocal":"_putLocal";n[g](O,{ctx:i},function(c,l){a[S]=c||l,b()});return}var v=O.metadata.id;s.has(v)?(A--,s.get(v).push([O,S])):s.set(v,[[O,S]])}),s.forEach(function(O,S){var g=0;function v(){++g<O.length?c():b()}function c(){var l=O[g],h=l[0],_=l[1];if(r.has(S))ms(e,r.get(S),h,a,_,v,o,$);else{var T=ma([],h.metadata.rev_tree[0],e);h.metadata.rev_tree=T.tree,h.stemmedRevs=T.stemmedRevs||[],y(h,_,v)}}c()})}var bs=5,ue="document-store",ye="by-sequence",be="attach-store",Je="attach-seq-store",me="meta-store",Te="local-store",Xn="detect-blob-support";function As(e){try{return JSON.parse(e)}catch{return hn.parse(e)}}function Ss(e){try{return JSON.stringify(e)}catch{return hn.stringify(e)}}function Pe(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(V(br,n,t.type))}}function Zn(e,t,n){return{data:Ss(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function We(e){if(!e)return null;var t=As(e.data);return t.winningRev=e.winningRev,t.deleted=e.deletedOrLocal==="1",t.seq=e.seq,t}function sn(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function ka(e,t,n,r){n?r(e?typeof e!="string"?e:Cr(e,t):xr([""],{type:t})):e?typeof e!="string"?va(e,function(i){r(Ut(i))}):r(e):r("")}function Ta(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var a=0;function o(){++a===i.length&&r&&r()}function u(f,y){var $=f._attachments[y],s=$.digest,m=n.objectStore(be).get(s);m.onsuccess=function(A){$.body=A.target.result.body,o()}}i.forEach(function(f){t.attachments&&t.include_docs?u(e,f):(e._attachments[f].stub=!0,o())})}function Vn(e,t){return Promise.all(e.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var a=n.doc._attachments[i];if("body"in a){var o=a.body,u=a.content_type;return new Promise(function(f){ka(o,u,t,function(y){n.doc._attachments[i]=Ye(Ft(a,["digest","content_type"]),{data:y}),f()})})}}))}}))}function Ia(e,t,n){var r=[],i=n.objectStore(ye),a=n.objectStore(be),o=n.objectStore(Je),u=e.length;function f(){u--,u||y()}function y(){!r.length||r.forEach(function($){var s=o.index("digestSeq").count(IDBKeyRange.bound($+"::",$+"::\uFFFF",!1,!1));s.onsuccess=function(m){var A=m.target.result;A||a.delete($)}})}e.forEach(function($){var s=i.index("_doc_id_rev"),m=t+"::"+$;s.getKey(m).onsuccess=function(A){var b=A.target.result;if(typeof b!="number")return f();i.delete(b);var O=o.index("seq").openCursor(IDBKeyRange.only(b));O.onsuccess=function(S){var g=S.target.result;if(g){var v=g.value.digestSeq.split("::")[0];r.push(v),o.delete(g.primaryKey),g.continue()}else f()}}})}function Ee(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}var Tt=new wt;function Os(e,t,n,r,i,a){for(var o=t.docs,u,f,y,$,s,m,A,b,O=0,S=o.length;O<S;O++){var g=o[O];g._id&&Ze(g._id)||(g=o[O]=Ca(g,n.new_edits,e),g.error&&!A&&(A=g))}if(A)return a(A);var v=!1,c=0,l=new Array(o.length),h=new we,_=!1,T=r._meta.blobSupport?"blob":"base64";_s(o,T,function(k){if(k)return a(k);L()});function L(){var k=[ue,ye,be,Te,Je,me],I=Ee(i,k,"readwrite");if(I.error)return a(I.error);u=I.txn,u.onabort=Pe(a),u.ontimeout=Pe(a),u.oncomplete=Y,f=u.objectStore(ue),y=u.objectStore(ye),$=u.objectStore(be),s=u.objectStore(Je),m=u.objectStore(me),m.get(me).onsuccess=function(C){b=C.target.result,K()},H(function(C){if(C)return _=!0,a(C);Z()})}function B(){v=!0,K()}function R(){$s(e.revs_limit,o,r,h,u,l,U,n,B)}function K(){!b||!v||(b.docCount+=c,m.put(b))}function Z(){if(!o.length)return;var k=0;function I(){++k===o.length&&R()}function C(E){var M=We(E.target.result);M&&h.set(M.id,M),I()}for(var P=0,q=o.length;P<q;P++){var j=o[P];if(j._id&&Ze(j._id)){I();continue}var N=f.get(j.metadata.id);N.onsuccess=C}}function Y(){_||(Tt.notify(r._meta.name),a(null,l))}function Q(k,I){var C=$.get(k);C.onsuccess=function(P){if(P.target.result)I();else{var q=V(Ho,"unknown stub attachment with digest "+k);q.status=412,I(q)}}}function H(k){var I=[];if(o.forEach(function(j){j.data&&j.data._attachments&&Object.keys(j.data._attachments).forEach(function(N){var E=j.data._attachments[N];E.stub&&I.push(E.digest)})}),!I.length)return k();var C=0,P;function q(){++C===I.length&&k(P)}I.forEach(function(j){Q(j,function(N){N&&!P&&(P=N),q()})})}function U(k,I,C,P,q,j,N,E){k.metadata.winningRev=I,k.metadata.deleted=C;var M=k.data;M._id=k.metadata.id,M._rev=k.metadata.rev,P&&(M._deleted=!0);var J=M._attachments&&Object.keys(M._attachments).length;if(J)return p(k,I,C,q,N,E);c+=j,K(),d(k,I,C,q,N,E)}function d(k,I,C,P,q,j){var N=k.data,E=k.metadata;N._doc_id_rev=E.id+"::"+E.rev,delete N._id,delete N._rev;function M(D){var z=k.stemmedRevs||[];P&&r.auto_compaction&&(z=z.concat(fu(k.metadata))),z&&z.length&&Ia(z,k.metadata.id,u),E.seq=D.target.result;var G=Zn(E,I,C),ee=f.put(G);ee.onsuccess=te}function J(D){D.preventDefault(),D.stopPropagation();var z=y.index("_doc_id_rev"),G=z.getKey(N._doc_id_rev);G.onsuccess=function(ee){var X=y.put(N,ee.target.result);X.onsuccess=M}}function te(){l[q]={ok:!0,id:E.id,rev:E.rev},h.set(k.metadata.id,k.metadata),w(k,E.seq,j)}var F=y.put(N);F.onsuccess=M,F.onerror=J}function p(k,I,C,P,q,j){var N=k.data,E=0,M=Object.keys(N._attachments);function J(){E===M.length&&d(k,I,C,P,q,j)}function te(){E++,J()}M.forEach(function(F){var D=k.data._attachments[F];if(D.stub)E++,J();else{var z=D.data;delete D.data,D.revpos=parseInt(I,10);var G=D.digest;x(G,z,te)}})}function w(k,I,C){var P=0,q=Object.keys(k.data._attachments||{});if(!q.length)return C();function j(){++P===q.length&&C()}function N(M){var J=k.data._attachments[M].digest,te=s.put({seq:I,digestSeq:J+"::"+I});te.onsuccess=j,te.onerror=function(F){F.preventDefault(),F.stopPropagation(),j()}}for(var E=0;E<q.length;E++)N(q[E])}function x(k,I,C){var P=$.count(k);P.onsuccess=function(q){var j=q.target.result;if(j)return C();var N={digest:k,body:I},E=$.put(N);E.onsuccess=C}}}function Pa(e,t,n,r,i){r===-1&&(r=1e3);var a=typeof e.getAll=="function"&&typeof e.getAllKeys=="function"&&r>1&&!n,o,u,f;function y(A){u=A.target.result,o&&i(o,u,f)}function $(A){o=A.target.result,u&&i(o,u,f)}function s(){if(!o.length)return i();var A=o[o.length-1],b;if(t&&t.upper)try{b=IDBKeyRange.bound(A,t.upper,!0,t.upperOpen)}catch(O){if(O.name==="DataError"&&O.code===0)return i()}else b=IDBKeyRange.lowerBound(A,!0);t=b,o=null,u=null,e.getAll(t,r).onsuccess=y,e.getAllKeys(t,r).onsuccess=$}function m(A){var b=A.target.result;if(!b)return i();i([b.key],[b.value],b)}a?(f={continue:s},e.getAll(t,r).onsuccess=y,e.getAllKeys(t,r).onsuccess=$):n?e.openCursor(t,"prev").onsuccess=m:e.openCursor(t).onsuccess=m}function xs(e,t,n){if(typeof e.getAll=="function"){e.getAll(t).onsuccess=n;return}var r=[];function i(a){var o=a.target.result;o?(r.push(o.value),o.continue()):n({target:{result:r}})}e.openCursor(t).onsuccess=i}function Es(e,t,n){var r=new Array(e.length),i=0;e.forEach(function(a,o){t.get(a).onsuccess=function(u){u.target.result?r[o]=u.target.result:r[o]={key:a,error:"not_found"},i++,i===e.length&&n(e,r,{})}})}function Cs(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(a){return{error:a}}return null}function ks(e,t,n){var r="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,a="key"in e?e.key:!1,o="keys"in e?e.keys:!1,u=e.skip||0,f=typeof e.limit=="number"?e.limit:-1,y=e.inclusive_end!==!1,$,s;if(!o&&($=Cs(r,i,y,a,e.descending),s=$&&$.error,s&&!(s.name==="DataError"&&s.code===0)))return n(V(br,s.name,s.message));var m=[ue,ye,me];e.attachments&&m.push(be);var A=Ee(t,m,"readonly");if(A.error)return n(A.error);var b=A.txn;b.oncomplete=Y,b.onabort=Pe(n);var O=b.objectStore(ue),S=b.objectStore(ye),g=b.objectStore(me),v=S.index("_doc_id_rev"),c=[],l,h;g.get(me).onsuccess=function(Q){l=Q.target.result.docCount},e.update_seq&&_(S,function(Q){Q.target.result&&Q.target.result.length>0&&(h=Q.target.result[0])});function _(Q,H){function U(d){var p=d.target.result,w=void 0;return p&&p.key&&(w=p.key),H({target:{result:[w]}})}Q.openCursor(null,"prev").onsuccess=U}function T(Q,H,U){var d=Q.id+"::"+U;v.get(d).onsuccess=function(w){if(H.doc=sn(w.target.result)||{},e.conflicts){var x=Pr(Q);x.length&&(H.doc._conflicts=x)}Ta(H.doc,e,b)}}function L(Q,H){var U={id:H.id,key:H.id,value:{rev:Q}},d=H.deleted;d?o&&(c.push(U),U.value.deleted=!0,U.doc=null):u--<=0&&(c.push(U),e.include_docs&&T(H,U,Q))}function B(Q){for(var H=0,U=Q.length;H<U&&c.length!==f;H++){var d=Q[H];if(d.error&&o){c.push(d);continue}var p=We(d),w=p.winningRev;L(w,p)}}function R(Q,H,U){!U||(B(H),c.length<f&&U.continue())}function K(Q){var H=Q.target.result;e.descending&&(H=H.reverse()),B(H)}function Z(){var Q={total_rows:l,offset:e.skip,rows:c};e.update_seq&&h!==void 0&&(Q.update_seq=h),n(null,Q)}function Y(){e.attachments?Vn(c,e.binary).then(Z):Z()}if(!(s||f===0)){if(o)return Es(e.keys,O,R);if(f===-1)return xs(O,$,K);Pa(O,$,e.descending,f+u,R)}}function Ts(e){return new Promise(function(t){var n=xr([""]),r=e.objectStore(Xn).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),a=navigator.userAgent.match(/Edge\//);t(a||!i||parseInt(i[1],10)>=43)},r.onerror=e.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)}}).catch(function(){return!1})}function Is(e,t){var n=e.objectStore(ue).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(r){t(r.target.result)}}var er=!1,tr=[];function Ps(e,t,n,r){try{e(t,n)}catch(i){r.emit("error",i)}}function si(){er||!tr.length||(er=!0,tr.shift()())}function qs(e,t,n){tr.push(function(){e(function(a,o){Ps(t,a,o,n),er=!1,pe(function(){si()})})}),si()}function js(e,t,n,r){if(e=le(e),e.continuous){var i=n+":"+wn();return Tt.addListener(n,i,t,e),Tt.notify(n),{cancel:function(){Tt.removeListener(n,i)}}}var a=e.doc_ids&&new ht(e.doc_ids);e.since=e.since||0;var o=e.since,u="limit"in e?e.limit:-1;u===0&&(u=1);var f=[],y=0,$=Ar(e),s=new we,m,A,b,O;function S(L,B,R){if(!R||!L.length)return;var K=new Array(L.length),Z=new Array(L.length);function Y(U,d){var p=e.processChange(d,U,e);o=p.seq=U.seq;var w=$(p);return typeof w=="object"?Promise.reject(w):w?(y++,e.return_docs&&f.push(p),e.attachments&&e.include_docs?new Promise(function(x){Ta(d,e,m,function(){Vn([p],e.binary).then(function(){x(p)})})}):Promise.resolve(p)):Promise.resolve()}function Q(){for(var U=[],d=0,p=K.length;d<p&&y!==u;d++){var w=K[d];if(!!w){var x=Z[d];U.push(Y(x,w))}}Promise.all(U).then(function(k){for(var I=0,C=k.length;I<C;I++)k[I]&&e.onChange(k[I])}).catch(e.complete),y!==u&&R.continue()}var H=0;B.forEach(function(U,d){var p=sn(U),w=L[d];v(p,w,function(x,k){Z[d]=x,K[d]=k,++H===L.length&&Q()})})}function g(L,B,R,K){if(R.seq!==B)return K();if(R.winningRev===L._rev)return K(R,L);var Z=L._id+"::"+R.winningRev,Y=O.get(Z);Y.onsuccess=function(Q){K(R,sn(Q.target.result))}}function v(L,B,R){if(a&&!a.has(L._id))return R();var K=s.get(L._id);if(K)return g(L,B,K,R);b.get(L._id).onsuccess=function(Z){K=We(Z.target.result),s.set(L._id,K),g(L,B,K,R)}}function c(){e.complete(null,{results:f,last_seq:o})}function l(){!e.continuous&&e.attachments?Vn(f).then(c):c()}var h=[ue,ye];e.attachments&&h.push(be);var _=Ee(r,h,"readonly");if(_.error)return e.complete(_.error);m=_.txn,m.onabort=Pe(e.complete),m.oncomplete=l,A=m.objectStore(ye),b=m.objectStore(ue),O=A.index("_doc_id_rev");var T=e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null;Pa(A,T,e.descending,u,S)}var ot=new we,Tn,In=new we;function qa(e,t){var n=this;qs(function(r){Bs(n,e,r)},t,n.constructor)}function Bs(e,t,n){var r=t.name,i=null,a=null;e._meta=null;function o(S){return function(g,v){g&&g instanceof Error&&!g.reason&&a&&(g.reason=a),S(g,v)}}function u(S){var g=S.createObjectStore(ue,{keyPath:"id"});S.createObjectStore(ye,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),S.createObjectStore(be,{keyPath:"digest"}),S.createObjectStore(me,{keyPath:"id",autoIncrement:!1}),S.createObjectStore(Xn),g.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),S.createObjectStore(Te,{keyPath:"_id"});var v=S.createObjectStore(Je,{autoIncrement:!0});v.createIndex("seq","seq"),v.createIndex("digestSeq","digestSeq",{unique:!0})}function f(S,g){var v=S.objectStore(ue);v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),v.openCursor().onsuccess=function(c){var l=c.target.result;if(l){var h=l.value,_=je(h);h.deletedOrLocal=_?"1":"0",v.put(h),l.continue()}else g()}}function y(S){S.createObjectStore(Te,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function $(S,g){var v=S.objectStore(Te),c=S.objectStore(ue),l=S.objectStore(ye),h=c.openCursor();h.onsuccess=function(_){var T=_.target.result;if(T){var L=T.value,B=L.id,R=Ze(B),K=Xe(L);if(R){var Z=B+"::"+K,Y=B+"::",Q=B+"::~",H=l.index("_doc_id_rev"),U=IDBKeyRange.bound(Y,Q,!1,!1),d=H.openCursor(U);d.onsuccess=function(p){if(d=p.target.result,!d)c.delete(T.primaryKey),T.continue();else{var w=d.value;w._doc_id_rev===Z&&v.put(w),l.delete(d.primaryKey),d.continue()}}}else T.continue()}else g&&g()}}function s(S){var g=S.createObjectStore(Je,{autoIncrement:!0});g.createIndex("seq","seq"),g.createIndex("digestSeq","digestSeq",{unique:!0})}function m(S,g){var v=S.objectStore(ye),c=S.objectStore(be),l=S.objectStore(Je),h=c.count();h.onsuccess=function(_){var T=_.target.result;if(!T)return g();v.openCursor().onsuccess=function(L){var B=L.target.result;if(!B)return g();for(var R=B.value,K=B.primaryKey,Z=Object.keys(R._attachments||{}),Y={},Q=0;Q<Z.length;Q++){var H=R._attachments[Z[Q]];Y[H.digest]=!0}var U=Object.keys(Y);for(Q=0;Q<U.length;Q++){var d=U[Q];l.put({seq:K,digestSeq:d+"::"+K})}B.continue()}}}function A(S){function g(h){return h.data?We(h):(h.deleted=h.deletedOrLocal==="1",h)}var v=S.objectStore(ye),c=S.objectStore(ue),l=c.openCursor();l.onsuccess=function(h){var _=h.target.result;if(!_)return;var T=g(_.value);T.winningRev=T.winningRev||Xe(T);function L(){var R=T.id+"::",K=T.id+"::\uFFFF",Z=v.index("_doc_id_rev").openCursor(IDBKeyRange.bound(R,K)),Y=0;Z.onsuccess=function(Q){var H=Q.target.result;if(!H)return T.seq=Y,B();var U=H.primaryKey;U>Y&&(Y=U),H.continue()}}function B(){var R=Zn(T,T.winningRev,T.deleted),K=c.put(R);K.onsuccess=function(){_.continue()}}if(T.seq)return B();L()}}e._remote=!1,e.type=function(){return"idb"},e._id=aa(function(S){S(null,e._meta.instanceId)}),e._bulkDocs=function(g,v,c){Os(t,g,v,e,i,o(c))},e._get=function(g,v,c){var l,h,_,T=v.ctx;if(!T){var L=Ee(i,[ue,ye,be],"readonly");if(L.error)return c(L.error);T=L.txn}function B(){c(_,{doc:l,metadata:h,ctx:T})}T.objectStore(ue).get(g).onsuccess=function(R){if(h=We(R.target.result),!h)return _=V(ke,"missing"),B();var K;if(v.rev)K=v.latest?pu(v.rev,h):v.rev;else{K=h.winningRev;var Z=je(h);if(Z)return _=V(ke,"deleted"),B()}var Y=T.objectStore(ye),Q=h.id+"::"+K;Y.index("_doc_id_rev").get(Q).onsuccess=function(H){if(l=H.target.result,l&&(l=sn(l)),!l)return _=V(ke,"missing"),B();B()}}},e._getAttachment=function(S,g,v,c,l){var h;if(c.ctx)h=c.ctx;else{var _=Ee(i,[ue,ye,be],"readonly");if(_.error)return l(_.error);h=_.txn}var T=v.digest,L=v.content_type;h.objectStore(be).get(T).onsuccess=function(B){var R=B.target.result.body;ka(R,L,c.binary,function(K){l(null,K)})}},e._info=function(g){var v,c,l=Ee(i,[me,ye],"readonly");if(l.error)return g(l.error);var h=l.txn;h.objectStore(me).get(me).onsuccess=function(_){c=_.target.result.docCount},h.objectStore(ye).openCursor(null,"prev").onsuccess=function(_){var T=_.target.result;v=T?T.key:0},h.oncomplete=function(){g(null,{doc_count:c,update_seq:v,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(g,v){ks(g,i,o(v))},e._changes=function(g){return js(g,e,r,i)},e._close=function(S){i.close(),ot.delete(r),S()},e._getRevisionTree=function(S,g){var v=Ee(i,[ue],"readonly");if(v.error)return g(v.error);var c=v.txn,l=c.objectStore(ue).get(S);l.onsuccess=function(h){var _=We(h.target.result);_?g(null,_.rev_tree):g(V(ke))}},e._doCompaction=function(S,g,v){var c=[ue,ye,be,Je],l=Ee(i,c,"readwrite");if(l.error)return v(l.error);var h=l.txn,_=h.objectStore(ue);_.get(S).onsuccess=function(T){var L=We(T.target.result);rt(L.rev_tree,function(K,Z,Y,Q,H){var U=Z+"-"+Y;g.indexOf(U)!==-1&&(H.status="missing")}),Ia(g,S,h);var B=L.winningRev,R=L.deleted;h.objectStore(ue).put(Zn(L,B,R))},h.onabort=Pe(v),h.oncomplete=function(){v()}},e._getLocal=function(S,g){var v=Ee(i,[Te],"readonly");if(v.error)return g(v.error);var c=v.txn,l=c.objectStore(Te).get(S);l.onerror=Pe(g),l.onsuccess=function(h){var _=h.target.result;_?(delete _._doc_id_rev,g(null,_)):g(V(ke))}},e._putLocal=function(S,g,v){typeof g=="function"&&(v=g,g={}),delete S._revisions;var c=S._rev,l=S._id;c?S._rev="0-"+(parseInt(c.split("-")[1],10)+1):S._rev="0-1";var h=g.ctx,_;if(!h){var T=Ee(i,[Te],"readwrite");if(T.error)return v(T.error);h=T.txn,h.onerror=Pe(v),h.oncomplete=function(){_&&v(null,_)}}var L=h.objectStore(Te),B;c?(B=L.get(l),B.onsuccess=function(R){var K=R.target.result;if(!K||K._rev!==c)v(V(yt));else{var Z=L.put(S);Z.onsuccess=function(){_={ok:!0,id:S._id,rev:S._rev},g.ctx&&v(null,_)}}}):(B=L.add(S),B.onerror=function(R){v(V(yt)),R.preventDefault(),R.stopPropagation()},B.onsuccess=function(){_={ok:!0,id:S._id,rev:S._rev},g.ctx&&v(null,_)})},e._removeLocal=function(S,g,v){typeof g=="function"&&(v=g,g={});var c=g.ctx;if(!c){var l=Ee(i,[Te],"readwrite");if(l.error)return v(l.error);c=l.txn,c.oncomplete=function(){h&&v(null,h)}}var h,_=S._id,T=c.objectStore(Te),L=T.get(_);L.onerror=Pe(v),L.onsuccess=function(B){var R=B.target.result;!R||R._rev!==S._rev?v(V(ke)):(T.delete(_),h={ok:!0,id:_,rev:"0-0"},g.ctx&&v(null,h))}},e._destroy=function(S,g){Tt.removeAllListeners(r);var v=In.get(r);v&&v.result&&(v.result.close(),ot.delete(r));var c=indexedDB.deleteDatabase(r);c.onsuccess=function(){In.delete(r),pn()&&r in localStorage&&delete localStorage[r],g(null,{ok:!0})},c.onerror=Pe(g)};var b=ot.get(r);if(b)return i=b.idb,e._meta=b.global,pe(function(){n(null,e)});var O=indexedDB.open(r,bs);In.set(r,O),O.onupgradeneeded=function(S){var g=S.target.result;if(S.oldVersion<1)return u(g);var v=S.currentTarget.transaction;S.oldVersion<3&&y(g),S.oldVersion<4&&s(g);var c=[f,$,m,A],l=S.oldVersion;function h(){var _=c[l-1];l++,_&&_(v,h)}h()},O.onsuccess=function(S){i=S.target.result,i.onversionchange=function(){i.close(),ot.delete(r)},i.onabort=function(B){Se("error","Database has a global failure",B.target.error),a=B.target.error,i.close(),ot.delete(r)};var g=i.transaction([me,Xn,ue],"readwrite"),v=!1,c,l,h,_;function T(){typeof h=="undefined"||!v||(e._meta={name:r,instanceId:_,blobSupport:h},ot.set(r,{idb:i,global:e._meta}),n(null,e))}function L(){if(!(typeof l=="undefined"||typeof c=="undefined")){var B=r+"_id";B in c?_=c[B]:c[B]=_=wn(),c.docCount=l,g.objectStore(me).put(c)}}g.objectStore(me).get(me).onsuccess=function(B){c=B.target.result||{id:me},L()},Is(g,function(B){l=B,L()}),Tn||(Tn=Ts(g)),Tn.then(function(B){h=B,T()}),g.oncomplete=function(){v=!0,T()},g.onabort=Pe(n)},O.onerror=function(S){var g=S.target.error&&S.target.error.message;g?g.indexOf("stored database is a higher version")!==-1&&(g=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):g="Failed to open indexedDB, are you in private browsing mode?",Se("error",g),n(V(br,g))}}qa.valid=function(){try{return typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}};function Ls(e){e.adapter("idb",qa,!0)}function Rs(e,t){return new Promise(function(n,r){var i=0,a=0,o=0,u=e.length,f;function y(){i++,e[a++]().then(s,m)}function $(){++o===u?f?r(f):n():A()}function s(){i--,$()}function m(b){i--,f=f||b,$()}function A(){for(;i<t&&a<u;)y()}A()})}var Ns=25,Ds=50,Vt=5e3,Ms=1e4,Pn={};function qn(e){var t=e.doc||e.ok,n=t&&t._attachments;!n||Object.keys(n).forEach(function(r){var i=n[r];i.data=Cr(i.data,i.content_type)})}function Ue(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function fi(e){return!e._attachments||!Object.keys(e._attachments)?Promise.resolve():Promise.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&typeof n.data!="string")return new Promise(function(r){kr(n.data,r)}).then(function(r){n.data=r})}))}function Fs(e){if(!e.prefix)return!1;var t=da(e.prefix).protocol;return t==="http"||t==="https"}function Us(e,t){if(Fs(t)){var n=t.name.substr(t.prefix.length),r=t.prefix.replace(/\/?$/,"/");e=r+encodeURIComponent(n)}var i=da(e);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var a=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=a.pop(),i.db.indexOf("%")===-1&&(i.db=encodeURIComponent(i.db)),i.path=a.join("/"),i}function ce(e,t){return nn(e,e.db+"/"+t)}function nn(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function en(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function zs(e){var t=typeof navigator!="undefined"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=t.indexOf("msie")!==-1,r=t.indexOf("trident")!==-1,i=t.indexOf("edge")!==-1,a=!("method"in e)||e.method==="GET";return(n||r||i)&&a}function nr(e,t){var n=this,r=Us(e.name,e),i=ce(r,"");e=le(e);var a=function(s,m){if(m=m||{},m.headers=m.headers||new ct,m.credentials="include",e.auth||r.auth){var A=e.auth||r.auth,b=A.username+":"+A.password,O=Ut(unescape(encodeURIComponent(b)));m.headers.set("Authorization","Basic "+O)}var S=e.headers||{};Object.keys(S).forEach(function(v){m.headers.append(v,S[v])}),zs(m)&&(s+=(s.indexOf("?")===-1?"?":"&")+"_nonce="+Date.now());var g=e.fetch||$a;return g(s,m)};function o(s,m){return fe(s,Be(function(A){y().then(function(){return m.apply(this,A)}).catch(function(b){var O=A.pop();O(b)})})).bind(n)}function u(s,m,A){var b={};return m=m||{},m.headers=m.headers||new ct,m.headers.get("Content-Type")||m.headers.set("Content-Type","application/json"),m.headers.get("Accept")||m.headers.set("Accept","application/json"),a(s,m).then(function(O){return b.ok=O.ok,b.status=O.status,O.json()}).then(function(O){if(b.data=O,!b.ok){b.data.status=b.status;var S=gt(b.data);if(A)return A(S);throw S}if(Array.isArray(b.data)&&(b.data=b.data.map(function(g){return g.error||g.missing?gt(g):g})),A)A(null,b.data);else return b})}var f;function y(){return e.skip_setup?Promise.resolve():f||(f=u(i).catch(function(s){return s&&s.status&&s.status===404?(Qn(404,"PouchDB is just detecting if the remote exists."),u(i,{method:"PUT"})):Promise.reject(s)}).catch(function(s){return s&&s.status&&s.status===412?!0:Promise.reject(s)}),f.catch(function(){f=null}),f)}pe(function(){t(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=o("id",function(s){a(nn(r,"")).then(function(m){return m.json()}).catch(function(){return{}}).then(function(m){var A=m&&m.uuid?m.uuid+r.db:ce(r,"");s(null,A)})}),n.compact=o("compact",function(s,m){typeof s=="function"&&(m=s,s={}),s=le(s),u(ce(r,"_compact"),{method:"POST"}).then(function(){function A(){n.info(function(b,O){O&&!O.compact_running?m(null,{ok:!0}):setTimeout(A,s.interval||200)})}A()})}),n.bulkGet=fe("bulkGet",function(s,m){var A=this;function b(v){var c={};s.revs&&(c.revs=!0),s.attachments&&(c.attachments=!0),s.latest&&(c.latest=!0),u(ce(r,"_bulk_get"+en(c)),{method:"POST",body:JSON.stringify({docs:s.docs})}).then(function(l){s.attachments&&s.binary&&l.data.results.forEach(function(h){h.docs.forEach(qn)}),v(null,l.data)}).catch(v)}function O(){var v=Ds,c=Math.ceil(s.docs.length/v),l=0,h=new Array(c);function _(B){return function(R,K){h[B]=K.results,++l===c&&m(null,{results:on(h)})}}for(var T=0;T<c;T++){var L=Ft(s,["revs","attachments","binary","latest"]);L.docs=s.docs.slice(T*v,Math.min(s.docs.length,(T+1)*v)),oa(A,L,_(T))}}var S=nn(r,""),g=Pn[S];typeof g!="boolean"?b(function(v,c){v?(Pn[S]=!1,Qn(v.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),O()):(Pn[S]=!0,m(null,c))}):g?b(m):O()}),n._info=function(s){y().then(function(){return a(ce(r,""))}).then(function(m){return m.json()}).then(function(m){m.host=ce(r,""),s(null,m)}).catch(s)},n.fetch=function(s,m){return y().then(function(){var A=s.substring(0,1)==="/"?nn(r,s.substring(1)):ce(r,s);return a(A,m)})},n.get=o("get",function(s,m,A){typeof m=="function"&&(A=m,m={}),m=le(m);var b={};m.revs&&(b.revs=!0),m.revs_info&&(b.revs_info=!0),m.latest&&(b.latest=!0),m.open_revs&&(m.open_revs!=="all"&&(m.open_revs=JSON.stringify(m.open_revs)),b.open_revs=m.open_revs),m.rev&&(b.rev=m.rev),m.conflicts&&(b.conflicts=m.conflicts),m.update_seq&&(b.update_seq=m.update_seq),s=Ue(s);function O(v){var c=v._attachments,l=c&&Object.keys(c);if(!c||!l.length)return;function h(T){var L=c[T],B=Ue(v._id)+"/"+$(T)+"?rev="+v._rev;return a(ce(r,B)).then(function(R){return"buffer"in R?R.buffer():R.blob()}).then(function(R){if(m.binary){var K=Object.getOwnPropertyDescriptor(R.__proto__,"type");return(!K||K.set)&&(R.type=L.content_type),R}return new Promise(function(Z){kr(R,Z)})}).then(function(R){delete L.stub,delete L.length,L.data=R})}var _=l.map(function(T){return function(){return h(T)}});return Rs(_,5)}function S(v){return Array.isArray(v)?Promise.all(v.map(function(c){if(c.ok)return O(c.ok)})):O(v)}var g=ce(r,s+en(b));u(g).then(function(v){return Promise.resolve().then(function(){if(m.attachments)return S(v.data)}).then(function(){A(null,v.data)})}).catch(function(v){v.docId=s,A(v)})}),n.remove=o("remove",function(s,m,A,b){var O;typeof m=="string"?(O={_id:s,_rev:m},typeof A=="function"&&(b=A,A={})):(O=s,typeof m=="function"?(b=m,A={}):(b=A,A=m));var S=O._rev||A.rev,g=ce(r,Ue(O._id))+"?rev="+S;u(g,{method:"DELETE"},b).catch(b)});function $(s){return s.split("/").map(encodeURIComponent).join("/")}n.getAttachment=o("getAttachment",function(s,m,A,b){typeof A=="function"&&(b=A,A={});var O=A.rev?"?rev="+A.rev:"",S=ce(r,Ue(s))+"/"+$(m)+O,g;a(S,{method:"GET"}).then(function(v){if(g=v.headers.get("content-type"),v.ok)return typeof process!="undefined"&&!process.browser&&typeof v.buffer=="function"?v.buffer():v.blob();throw v}).then(function(v){typeof process!="undefined"&&!process.browser&&(v.type=g),b(null,v)}).catch(function(v){b(v)})}),n.removeAttachment=o("removeAttachment",function(s,m,A,b){var O=ce(r,Ue(s)+"/"+$(m))+"?rev="+A;u(O,{method:"DELETE"},b).catch(b)}),n.putAttachment=o("putAttachment",function(s,m,A,b,O,S){typeof O=="function"&&(S=O,O=b,b=A,A=null);var g=Ue(s)+"/"+$(m),v=ce(r,g);if(A&&(v+="?rev="+A),typeof b=="string"){var c;try{c=Or(b)}catch{return S(V(fa,"Attachment is not a valid base64 string"))}b=c?Er(c,O):""}u(v,{headers:new ct({"Content-Type":O}),method:"PUT",body:b},S).catch(S)}),n._bulkDocs=function(s,m,A){s.new_edits=m.new_edits,y().then(function(){return Promise.all(s.docs.map(fi))}).then(function(){return u(ce(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(s)},A)}).catch(A)},n._put=function(s,m,A){y().then(function(){return fi(s)}).then(function(){return u(ce(r,Ue(s._id)),{method:"PUT",body:JSON.stringify(s)})}).then(function(b){A(null,b.data)}).catch(function(b){b.docId=s&&s._id,A(b)})},n.allDocs=o("allDocs",function(s,m){typeof s=="function"&&(m=s,s={}),s=le(s);var A={},b,O="GET";s.conflicts&&(A.conflicts=!0),s.update_seq&&(A.update_seq=!0),s.descending&&(A.descending=!0),s.include_docs&&(A.include_docs=!0),s.attachments&&(A.attachments=!0),s.key&&(A.key=JSON.stringify(s.key)),s.start_key&&(s.startkey=s.start_key),s.startkey&&(A.startkey=JSON.stringify(s.startkey)),s.end_key&&(s.endkey=s.end_key),s.endkey&&(A.endkey=JSON.stringify(s.endkey)),typeof s.inclusive_end!="undefined"&&(A.inclusive_end=!!s.inclusive_end),typeof s.limit!="undefined"&&(A.limit=s.limit),typeof s.skip!="undefined"&&(A.skip=s.skip);var S=en(A);typeof s.keys!="undefined"&&(O="POST",b={keys:s.keys}),u(ce(r,"_all_docs"+S),{method:O,body:JSON.stringify(b)}).then(function(g){s.include_docs&&s.attachments&&s.binary&&g.data.rows.forEach(qn),m(null,g.data)}).catch(m)}),n._changes=function(s){var m="batch_size"in s?s.batch_size:Ns;s=le(s),s.continuous&&!("heartbeat"in s)&&(s.heartbeat=Ms);var A="timeout"in s?s.timeout:30*1e3;"timeout"in s&&s.timeout&&A-s.timeout<Vt&&(A=s.timeout+Vt),"heartbeat"in s&&s.heartbeat&&A-s.heartbeat<Vt&&(A=s.heartbeat+Vt);var b={};"timeout"in s&&s.timeout&&(b.timeout=s.timeout);var O=typeof s.limit!="undefined"?s.limit:!1,S=O;if(s.style&&(b.style=s.style),(s.include_docs||s.filter&&typeof s.filter=="function")&&(b.include_docs=!0),s.attachments&&(b.attachments=!0),s.continuous&&(b.feed="longpoll"),s.seq_interval&&(b.seq_interval=s.seq_interval),s.conflicts&&(b.conflicts=!0),s.descending&&(b.descending=!0),s.update_seq&&(b.update_seq=!0),"heartbeat"in s&&s.heartbeat&&(b.heartbeat=s.heartbeat),s.filter&&typeof s.filter=="string"&&(b.filter=s.filter),s.view&&typeof s.view=="string"&&(b.filter="_view",b.view=s.view),s.query_params&&typeof s.query_params=="object")for(var g in s.query_params)Object.prototype.hasOwnProperty.call(s.query_params,g)&&(b[g]=s.query_params[g]);var v="GET",c;s.doc_ids?(b.filter="_doc_ids",v="POST",c={doc_ids:s.doc_ids}):s.selector&&(b.filter="_selector",v="POST",c={selector:s.selector});var l=new Eu,h,_=function(B,R){if(!s.aborted){b.since=B,typeof b.since=="object"&&(b.since=JSON.stringify(b.since)),s.descending?O&&(b.limit=S):b.limit=!O||S>m?m:S;var K=ce(r,"_changes"+en(b)),Z={signal:l.signal,method:v,body:JSON.stringify(c)};h=B,!s.aborted&&y().then(function(){return u(K,Z,R)}).catch(R)}},T={results:[]},L=function(B,R){if(!s.aborted){var K=0;if(R&&R.results){K=R.results.length,T.last_seq=R.last_seq;var Z=null,Y=null;typeof R.pending=="number"&&(Z=R.pending),(typeof T.last_seq=="string"||typeof T.last_seq=="number")&&(Y=T.last_seq);var Q={};Q.query=s.query_params,R.results=R.results.filter(function(U){S--;var d=Ar(s)(U);return d&&(s.include_docs&&s.attachments&&s.binary&&qn(U),s.return_docs&&T.results.push(U),s.onChange(U,Z,Y)),d})}else if(B){s.aborted=!0,s.complete(B);return}R&&R.last_seq&&(h=R.last_seq);var H=O&&S<=0||R&&K<m||s.descending;s.continuous&&!(O&&S<=0)||!H?pe(function(){_(h,L)}):s.complete(null,T)}};return _(s.since||0,L),{cancel:function(){s.aborted=!0,l.abort()}}},n.revsDiff=o("revsDiff",function(s,m,A){typeof m=="function"&&(A=m,m={}),u(ce(r,"_revs_diff"),{method:"POST",body:JSON.stringify(s)},A).catch(A)}),n._close=function(s){s()},n._destroy=function(s,m){u(ce(r,""),{method:"DELETE"}).then(function(A){m(null,A)}).catch(function(A){A.status===404?m(null,{ok:!0}):m(A)})}}nr.valid=function(){return!0};function Ks(e){e.adapter("http",nr,!1),e.adapter("https",nr,!1)}function Qe(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Qe)}catch{}}_e(Qe,Error);function $n(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,$n)}catch{}}_e($n,Error);function bn(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,bn)}catch{}}_e(bn,Error);function ja(e,t){return t&&e.then(function(n){pe(function(){t(null,n)})},function(n){pe(function(){t(n)})}),e}function Qs(e){return Be(function(t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&ja(r,n),r})}function Gs(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function jn(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function ci(e){var t=new ht(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function Bn(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function li(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new bn(t)}function rr(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if(typeof i!="number")if(Array.isArray(i)){t=typeof t=="number"?[t]:t;for(var a=0,o=i.length;a<o;a++){var u=i[a];if(typeof u!="number")throw li("_sum");typeof t[a]=="undefined"?t.push(u):t[a]+=u}}else throw li("_sum");else typeof t=="number"?t+=i:t[0]+=i}return t}var Hs=Se.bind(null,"log"),Js=Array.isArray,Ws=JSON.parse;function Ba(e,t){return Sr("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:rr,log:Hs,isArray:Js,toJSON:Ws})}function qt(){this.promise=new Promise(function(e){e()})}qt.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise};qt.prototype.finish=function(){return this.promise};function di(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function Ys(e,t){return di(e)+di(t)+"undefined"}function vi(e,t,n,r,i,a){var o=Ys(n,r),u;if(!i&&(u=e._cachedViews=e._cachedViews||{},u[o]))return u[o];var f=e.info().then(function(y){var $=y.db_name+"-mrview-"+(i?"temp":ya(o));function s(m){m.views=m.views||{};var A=t;A.indexOf("/")===-1&&(A=t+"/"+t);var b=m.views[A]=m.views[A]||{};if(!b[$])return b[$]=!0,m}return mn(e,"_local/"+a,s).then(function(){return e.registerDependentDatabase($).then(function(m){var A=m.db;A.auto_compaction=!0;var b={name:$,db:A,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return b.db.get("_local/lastSeq").catch(function(O){if(O.status!==404)throw O}).then(function(O){return b.seq=O?O.seq:0,u&&b.db.once("destroyed",function(){delete u[o]}),b})})})});return u&&(u[o]=f),f}var hi={},yi=new qt,Xs=50;function Ln(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function Zs(e){return e.length===1&&/^1-/.test(e[0].rev)}function gi(e,t){try{e.emit("error",t)}catch{Se("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),Se("error",t)}}function Vs(e,t,n,r){function i(d,p,w){try{p(w)}catch(x){gi(d,x)}}function a(d,p,w,x,k){try{return{output:p(w,x,k)}}catch(I){return gi(d,I),{error:I}}}function o(d,p){var w=oe(d.key,p.key);return w!==0?w:oe(d.value,p.value)}function u(d,p,w){return w=w||0,typeof p=="number"?d.slice(w,p+w):w>0?d.slice(w):d}function f(d){var p=d.value,w=p&&typeof p=="object"&&p._id||d.id;return w}function y(d){d.rows.forEach(function(p){var w=p.doc&&p.doc._attachments;!w||Object.keys(w).forEach(function(x){var k=w[x];w[x].data=Cr(k.data,k.content_type)})})}function $(d){return function(p){return d.include_docs&&d.attachments&&d.binary&&y(p),p}}function s(d,p,w,x){var k=p[d];typeof k!="undefined"&&(x&&(k=encodeURIComponent(JSON.stringify(k))),w.push(d+"="+k))}function m(d){if(typeof d!="undefined"){var p=Number(d);return!isNaN(p)&&p===parseInt(d,10)?p:d}}function A(d){return d.group_level=m(d.group_level),d.limit=m(d.limit),d.skip=m(d.skip),d}function b(d){if(d){if(typeof d!="number")return new Qe('Invalid value for integer: "'+d+'"');if(d<0)return new Qe('Invalid value for positive integer: "'+d+'"')}}function O(d,p){var w=d.descending?"endkey":"startkey",x=d.descending?"startkey":"endkey";if(typeof d[w]!="undefined"&&typeof d[x]!="undefined"&&oe(d[w],d[x])>0)throw new Qe("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(p.reduce&&d.reduce!==!1){if(d.include_docs)throw new Qe("{include_docs:true} is invalid for reduce");if(d.keys&&d.keys.length>1&&!d.group&&!d.group_level)throw new Qe("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(k){var I=b(d[k]);if(I)throw I})}function S(d,p,w){var x=[],k,I="GET",C,P;if(s("reduce",w,x),s("include_docs",w,x),s("attachments",w,x),s("limit",w,x),s("descending",w,x),s("group",w,x),s("group_level",w,x),s("skip",w,x),s("stale",w,x),s("conflicts",w,x),s("startkey",w,x,!0),s("start_key",w,x,!0),s("endkey",w,x,!0),s("end_key",w,x,!0),s("inclusive_end",w,x),s("key",w,x,!0),s("update_seq",w,x),x=x.join("&"),x=x===""?"":"?"+x,typeof w.keys!="undefined"){var q=2e3,j="keys="+encodeURIComponent(JSON.stringify(w.keys));j.length+x.length+1<=q?x+=(x[0]==="?"?"&":"?")+j:(I="POST",typeof p=="string"?k={keys:w.keys}:p.keys=w.keys)}if(typeof p=="string"){var N=Ln(p);return d.fetch("_design/"+N[0]+"/_view/"+N[1]+x,{headers:new ct({"Content-Type":"application/json"}),method:I,body:JSON.stringify(k)}).then(function(E){return C=E.ok,P=E.status,E.json()}).then(function(E){if(!C)throw E.status=P,gt(E);return E.rows.forEach(function(M){if(M.value&&M.value.error&&M.value.error==="builtin_reduce_error")throw new Error(M.reason)}),E}).then($(w))}return k=k||{},Object.keys(p).forEach(function(E){Array.isArray(p[E])?k[E]=p[E]:k[E]=p[E].toString()}),d.fetch("_temp_view"+x,{headers:new ct({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(k)}).then(function(E){return C=E.ok,P=E.status,E.json()}).then(function(E){if(!C)throw E.status=P,gt(E);return E}).then($(w))}function g(d,p,w){return new Promise(function(x,k){d._query(p,w,function(I,C){if(I)return k(I);x(C)})})}function v(d){return new Promise(function(p,w){d._viewCleanup(function(x,k){if(x)return w(x);p(k)})})}function c(d){return function(p){if(p.status===404)return d;throw p}}function l(d,p,w){var x="_local/doc_"+d,k={_id:x,keys:[]},I=w.get(d),C=I[0],P=I[1];function q(){return Zs(P)?Promise.resolve(k):p.db.get(x).catch(c(k))}function j(E){return E.keys.length?p.db.allDocs({keys:E.keys,include_docs:!0}):Promise.resolve({rows:[]})}function N(E,M){for(var J=[],te=new ht,F=0,D=M.rows.length;F<D;F++){var z=M.rows[F],G=z.doc;if(!!G&&(J.push(G),te.add(G._id),G._deleted=!C.has(G._id),!G._deleted)){var ee=C.get(G._id);"value"in ee&&(G.value=ee.value)}}var X=Bn(C);return X.forEach(function(ve){if(!te.has(ve)){var Oe={_id:ve},At=C.get(ve);"value"in At&&(Oe.value=At.value),J.push(Oe)}}),E.keys=ci(X.concat(E.keys)),J.push(E),J}return q().then(function(E){return j(E).then(function(M){return N(E,M)})})}function h(d,p,w){var x="_local/lastSeq";return d.db.get(x).catch(c({_id:x,seq:0})).then(function(k){var I=Bn(p);return Promise.all(I.map(function(C){return l(C,d,p)})).then(function(C){var P=on(C);return k.seq=w,P.push(k),d.db.bulkDocs({docs:P})})})}function _(d){var p=typeof d=="string"?d:d.name,w=hi[p];return w||(w=hi[p]=new qt),w}function T(d,p){return jn(_(d),function(){return L(d,p)})()}function L(d,p){var w,x;function k(F,D){var z={id:x._id,key:Ve(F)};typeof D!="undefined"&&D!==null&&(z.value=Ve(D)),w.push(z)}var I=t(d.mapFun,k),C=d.seq||0;function P(F,D){return function(){return h(d,F,D)}}let q=0,j={view:d.name,indexed_docs:q};d.sourceDB.emit("indexing",j);var N=new qt;function E(){return d.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:C,limit:p.changes_batch_size}).then(M)}function M(F){var D=F.results;if(!D.length)return;var z=J(D);N.add(P(z,C)),q=q+D.length;let G={view:d.name,last_seq:F.last_seq,results_count:D.length,indexed_docs:q};if(d.sourceDB.emit("indexing",G),!(D.length<p.changes_batch_size))return E()}function J(F){for(var D=new we,z=0,G=F.length;z<G;z++){var ee=F[z];if(ee.doc._id[0]!=="_"){w=[],x=ee.doc,x._deleted||i(d.sourceDB,I,x),w.sort(o);var X=te(w);D.set(ee.doc._id,[X,ee.changes])}C=ee.seq}return D}function te(F){for(var D=new we,z,G=0,ee=F.length;G<ee;G++){var X=F[G],ve=[X.key,X.id];G>0&&oe(X.key,z)===0&&ve.push(G),D.set(xe(ve),X),z=X.key}return D}return E().then(function(){return N.finish()}).then(function(){d.seq=C})}function B(d,p,w){w.group_level===0&&delete w.group_level;var x=w.group||w.group_level,k=n(d.reduceFun),I=[],C=isNaN(w.group_level)?Number.POSITIVE_INFINITY:w.group_level;p.forEach(function(E){var M=I[I.length-1],J=x?E.key:null;if(x&&Array.isArray(J)&&(J=J.slice(0,C)),M&&oe(M.groupKey,J)===0){M.keys.push([E.key,E.id]),M.values.push(E.value);return}I.push({keys:[[E.key,E.id]],values:[E.value],groupKey:J})}),p=[];for(var P=0,q=I.length;P<q;P++){var j=I[P],N=a(d.sourceDB,k,j.keys,j.values,!1);if(N.error&&N.error instanceof bn)throw N.error;p.push({value:N.error?null:N.output,key:j.groupKey})}return{rows:u(p,w.limit,w.skip)}}function R(d,p){return jn(_(d),function(){return K(d,p)})()}function K(d,p){var w,x=d.reduceFun&&p.reduce!==!1,k=p.skip||0;typeof p.keys!="undefined"&&!p.keys.length&&(p.limit=0,delete p.keys);function I(F){return F.include_docs=!0,d.db.allDocs(F).then(function(D){return w=D.total_rows,D.rows.map(function(z){if("value"in z.doc&&typeof z.doc.value=="object"&&z.doc.value!==null){var G=Object.keys(z.doc.value).sort(),ee=["id","key","value"];if(!(G<ee||G>ee))return z.doc.value}var X=Ku(z.doc._id);return{key:X[0],id:X[1],value:"value"in z.doc?z.doc.value:null}})})}function C(F){var D;if(x?D=B(d,F,p):typeof p.keys=="undefined"?D={total_rows:w,offset:k,rows:F}:D={total_rows:w,offset:k,rows:u(F,p.limit,p.skip)},p.update_seq&&(D.update_seq=d.seq),p.include_docs){var z=ci(F.map(f));return d.sourceDB.allDocs({keys:z,include_docs:!0,conflicts:p.conflicts,attachments:p.attachments,binary:p.binary}).then(function(G){var ee=new we;return G.rows.forEach(function(X){ee.set(X.id,X.doc)}),F.forEach(function(X){var ve=f(X),Oe=ee.get(ve);Oe&&(X.doc=Oe)}),D})}else return D}if(typeof p.keys!="undefined"){var P=p.keys,q=P.map(function(F){var D={startkey:xe([F]),endkey:xe([F,{}])};return p.update_seq&&(D.update_seq=!0),I(D)});return Promise.all(q).then(on).then(C)}else{var j={descending:p.descending};p.update_seq&&(j.update_seq=!0);var N,E;if("start_key"in p&&(N=p.start_key),"startkey"in p&&(N=p.startkey),"end_key"in p&&(E=p.end_key),"endkey"in p&&(E=p.endkey),typeof N!="undefined"&&(j.startkey=p.descending?xe([N,{}]):xe([N])),typeof E!="undefined"){var M=p.inclusive_end!==!1;p.descending&&(M=!M),j.endkey=xe(M?[E,{}]:[E])}if(typeof p.key!="undefined"){var J=xe([p.key]),te=xe([p.key,{}]);j.descending?(j.endkey=J,j.startkey=te):(j.startkey=J,j.endkey=te)}return x||(typeof p.limit=="number"&&(j.limit=p.limit),j.skip=k),I(j).then(C)}}function Z(d){return d.fetch("_view_cleanup",{headers:new ct({"Content-Type":"application/json"}),method:"POST"}).then(function(p){return p.json()})}function Y(d){return d.get("_local/"+e).then(function(p){var w=new we;Object.keys(p.views).forEach(function(k){var I=Ln(k),C="_design/"+I[0],P=I[1],q=w.get(C);q||(q=new ht,w.set(C,q)),q.add(P)});var x={keys:Bn(w),include_docs:!0};return d.allDocs(x).then(function(k){var I={};k.rows.forEach(function(q){var j=q.key.substring(8);w.get(q.key).forEach(function(N){var E=j+"/"+N;p.views[E]||(E=N);var M=Object.keys(p.views[E]),J=q.doc&&q.doc.views&&q.doc.views[N];M.forEach(function(te){I[te]=I[te]||J})})});var C=Object.keys(I).filter(function(q){return!I[q]}),P=C.map(function(q){return jn(_(q),function(){return new d.constructor(q,d.__opts).destroy()})()});return Promise.all(P).then(function(){return{ok:!0}})})},c({ok:!0}))}function Q(d,p,w){if(typeof d._query=="function")return g(d,p,w);if(qe(d))return S(d,p,w);var x={changes_batch_size:d.__opts.view_update_changes_batch_size||Xs};if(typeof p!="string")return O(w,p),yi.add(function(){var q=vi(d,"temp_view/temp_view",p.map,p.reduce,!0,e);return q.then(function(j){return Gs(T(j,x).then(function(){return R(j,w)}),function(){return j.db.destroy()})})}),yi.finish();var k=p,I=Ln(k),C=I[0],P=I[1];return d.get("_design/"+C).then(function(q){var j=q.views&&q.views[P];if(!j)throw new $n("ddoc "+q._id+" has no view named "+P);r(q,P),O(w,j);var N=vi(d,k,j.map,j.reduce,!1,e);return N.then(function(E){return w.stale==="ok"||w.stale==="update_after"?(w.stale==="update_after"&&pe(function(){T(E,x)}),R(E,w)):T(E,x).then(function(){return R(E,w)})})})}function H(d,p,w){var x=this;typeof p=="function"&&(w=p,p={}),p=p?A(p):{},typeof d=="function"&&(d={map:d});var k=Promise.resolve().then(function(){return Q(x,d,p)});return ja(k,w),k}var U=Qs(function(){var d=this;return typeof d._viewCleanup=="function"?v(d):qe(d)?Z(d):Y(d)});return{query:H,viewCleanup:U}}var Rn={_sum:function(e,t){return rr(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(r){for(var i=0,a=0,o=r.length;a<o;a++){var u=r[a];i+=u*u}return i}return{sum:rr(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};function ef(e){if(/^_sum/.test(e))return Rn._sum;if(/^_count/.test(e))return Rn._count;if(/^_stats/.test(e))return Rn._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}function tf(e,t){if(typeof e=="function"&&e.length===2){var n=e;return function(r){return n(r,t)}}else return Ba(e.toString(),t)}function nf(e){var t=e.toString(),n=ef(t);return n||Ba(t)}function rf(e,t){var n=e.views&&e.views[t];if(typeof n.map!="string")throw new $n("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}var af="mrviews",La=Vs(af,tf,nf,rf);function of(e,t,n){return La.query.call(this,e,t,n)}function uf(e){return La.viewCleanup.call(this,e)}var sf={query:of,viewCleanup:uf};function pi(e){return/^1-/.test(e)}function ff(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}function _i(e,t){var n=Object.keys(t._attachments);return Promise.all(n.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function cf(e,t,n){var r=qe(t)&&!qe(e),i=Object.keys(n._attachments);return r?e.get(n._id).then(function(a){return Promise.all(i.map(function(o){return ff(a,n,o)?t.getAttachment(n._id,o):e.getAttachment(a._id,o)}))}).catch(function(a){if(a.status!==404)throw a;return _i(t,n)}):_i(t,n)}function lf(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n].missing;r.forEach(function(i){t.push({id:n,rev:i})})}),{docs:t,revs:!0,latest:!0}}function df(e,t,n,r){n=le(n);var i=[],a=!0;function o(){var m=lf(n);if(!!m.docs.length)return e.bulkGet(m).then(function(A){if(r.cancelled)throw new Error("cancelled");return Promise.all(A.results.map(function(b){return Promise.all(b.docs.map(function(O){var S=O.ok;return O.error&&(a=!1),!S||!S._attachments?S:cf(t,e,S).then(function(g){var v=Object.keys(S._attachments);return g.forEach(function(c,l){var h=S._attachments[v[l]];delete h.stub,delete h.length,h.data=c}),S})}))})).then(function(b){i=i.concat(on(b).filter(Boolean))})})}function u(m){return m._attachments&&Object.keys(m._attachments).length>0}function f(m){return m._conflicts&&m._conflicts.length>0}function y(m){return e.allDocs({keys:m,include_docs:!0,conflicts:!0}).then(function(A){if(r.cancelled)throw new Error("cancelled");A.rows.forEach(function(b){b.deleted||!b.doc||!pi(b.value.rev)||u(b.doc)||f(b.doc)||(b.doc._conflicts&&delete b.doc._conflicts,i.push(b.doc),delete n[b.id])})})}function $(){var m=Object.keys(n).filter(function(A){var b=n[A].missing;return b.length===1&&pi(b[0])});if(m.length>0)return y(m)}function s(){return{ok:a,docs:i}}return Promise.resolve().then($).then(o).then(s)}var mi=1,wi="pouchdb",vf=5,Ie=0;function Lr(e,t,n,r,i){return e.get(t).catch(function(a){if(a.status===404)return(e.adapter==="http"||e.adapter==="https")&&Qn(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:wi,version:mi};throw a}).then(function(a){if(!i.cancelled&&a.last_seq!==n)return a.history=(a.history||[]).filter(function(o){return o.session_id!==r}),a.history.unshift({last_seq:n,session_id:r}),a.history=a.history.slice(0,vf),a.version=mi,a.replicator=wi,a.session_id=r,a.last_seq=n,e.put(a).catch(function(o){if(o.status===409)return Lr(e,t,n,r,i);throw o})})}function Qt(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}Qt.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})};Qt.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?Lr(this.target,this.id,e,t,this.returnValue):Promise.resolve(!0)};Qt.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return Lr(this.src,this.id,e,t,this.returnValue).catch(function(r){if(Na(r))return n.opts.writeSourceCheckpoint=!1,!0;throw r})}else return Promise.resolve(!0)};var $i={undefined:function(e,t){return oe(e.last_seq,t.last_seq)===0?t.last_seq:0},"1":function(e,t){return hf(t,e).last_seq}};Qt.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(t){return t.last_seq||Ie}).catch(function(t){if(t.status!==404)throw t;return Ie}):e.target.get(e.id).then(function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||Ie:e.src.get(e.id).then(function(n){if(t.version!==n.version)return Ie;var r;return t.version?r=t.version.toString():r="undefined",r in $i?$i[r](t,n):Ie},function(n){if(n.status===404&&t.last_seq)return e.src.put({_id:e.id,last_seq:Ie}).then(function(){return Ie},function(r){return Na(r)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):Ie});throw n})}).catch(function(t){if(t.status!==404)throw t;return Ie})};function hf(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:Ra(e.history,t.history)}function Ra(e,t){var n=e[0],r=e.slice(1),i=t[0],a=t.slice(1);if(!n||t.length===0)return{last_seq:Ie,history:[]};var o=n.session_id;if(ir(o,t))return{last_seq:n.last_seq,history:e};var u=i.session_id;return ir(u,r)?{last_seq:i.last_seq,history:a}:Ra(r,a)}function ir(e,t){var n=t[0],r=t.slice(1);return!e||t.length===0?!1:e===n.session_id?!0:ir(e,r)}function Na(e){return typeof e.status=="number"&&Math.floor(e.status/100)===4}var bi=0;function yf(e,t,n,r){if(e.retry===!1){t.emit("error",n),t.removeAllListeners();return}if(typeof e.back_off_function!="function"&&(e.back_off_function=Uo),t.emit("requestError",n),t.state==="active"||t.state==="pending"){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=bi},a=function(){t.removeListener("active",i)};t.once("paused",a),t.once("active",i)}e.current_back_off=e.current_back_off||bi,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}function gf(e){return Object.keys(e).sort(oe).reduce(function(t,n){return t[n]=e[n],t},{})}function pf(e,t,n){var r=n.doc_ids?n.doc_ids.sort(oe):"",i=n.filter?n.filter.toString():"",a="",o="",u="";return n.selector&&(u=JSON.stringify(n.selector)),n.filter&&n.query_params&&(a=JSON.stringify(gf(n.query_params))),n.filter&&n.filter==="_view"&&(o=n.view.toString()),Promise.all([e.id(),t.id()]).then(function(f){var y=f[0]+f[1]+i+o+a+r+u;return new Promise(function($){Tr(y,$)})}).then(function(f){return f=f.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+f})}function Da(e,t,n,r,i){var a=[],o,u={seq:0,changes:[],docs:[]},f=!1,y=!1,$=!1,s=0,m=n.continuous||n.live||!1,A=n.batch_size||100,b=n.batches_limit||10,O=n.style||"all_docs",S=!1,g=n.doc_ids,v=n.selector,c,l,h=[],_=wn();i=i||{ok:!0,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var T={};r.ready(e,t);function L(){return l?Promise.resolve():pf(e,t,n).then(function(C){c=C;var P={};n.checkpoint===!1?P={writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:n.checkpoint==="source"?P={writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:n.checkpoint==="target"?P={writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:P={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},l=new Qt(e,t,c,r,P)})}function B(){if(h=[],o.docs.length!==0){var C=o.docs,P={timeout:n.timeout};return t.bulkDocs({docs:C,new_edits:!1},P).then(function(q){if(r.cancelled)throw U(),new Error("cancelled");var j=Object.create(null);q.forEach(function(E){E.error&&(j[E.id]=E)});var N=Object.keys(j).length;i.doc_write_failures+=N,i.docs_written+=C.length-N,C.forEach(function(E){var M=j[E._id];if(M){i.errors.push(M);var J=(M.name||"").toLowerCase();if(J==="unauthorized"||J==="forbidden")r.emit("denied",le(M));else throw M}else h.push(E)})},function(q){throw i.doc_write_failures+=C.length,q})}}function R(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=s=o.seq;var C=le(i);return h.length&&(C.docs=h,typeof o.pending=="number"&&(C.pending=o.pending,delete o.pending),r.emit("change",C)),f=!0,l.writeCheckpoint(o.seq,_).then(function(){if(r.emit("checkpoint",{checkpoint:o.seq}),f=!1,r.cancelled)throw U(),new Error("cancelled");o=void 0,x()}).catch(function(P){throw I(P),P})}function K(){var C={};return o.changes.forEach(function(P){r.emit("checkpoint",{revs_diff:P}),P.id!=="_user/"&&(C[P.id]=P.changes.map(function(q){return q.rev}))}),t.revsDiff(C).then(function(P){if(r.cancelled)throw U(),new Error("cancelled");o.diffs=P})}function Z(){return df(e,t,o.diffs,r).then(function(C){o.error=!C.ok,C.docs.forEach(function(P){delete o.diffs[P._id],i.docs_read++,o.docs.push(P)})})}function Y(){if(!(r.cancelled||o)){if(a.length===0){Q(!0);return}o=a.shift(),r.emit("checkpoint",{start_next_batch:o.seq}),K().then(Z).then(B).then(R).then(Y).catch(function(C){H("batch processing terminated with error",C)})}}function Q(C){if(u.changes.length===0){a.length===0&&!o&&((m&&T.live||y)&&(r.state="pending",r.emit("paused")),y&&U());return}(C||y||u.changes.length>=A)&&(a.push(u),u={seq:0,changes:[],docs:[]},(r.state==="pending"||r.state==="stopped")&&(r.state="active",r.emit("active")),Y())}function H(C,P){$||(P.message||(P.message=C),i.ok=!1,i.status="aborting",a=[],u={seq:0,changes:[],docs:[]},U(P))}function U(C){if(!$&&!(r.cancelled&&(i.status="cancelled",f)))if(i.status=i.status||"complete",i.end_time=new Date().toISOString(),i.last_seq=s,$=!0,C){C=V(C),C.result=i;var P=(C.name||"").toLowerCase();P==="unauthorized"||P==="forbidden"?(r.emit("error",C),r.removeAllListeners()):yf(n,r,C,function(){Da(e,t,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function d(C,P,q){if(r.cancelled)return U();typeof P=="number"&&(u.pending=P);var j=Ar(n)(C);!j||(u.seq=C.seq||q,u.changes.push(C),r.emit("checkpoint",{pending_batch:u.seq}),pe(function(){Q(a.length===0&&T.live)}))}function p(C){if(S=!1,r.cancelled)return U();if(C.results.length>0)T.since=C.results[C.results.length-1].seq,x(),Q(!0);else{var P=function(){m?(T.live=!0,x()):y=!0,Q(!0)};!o&&C.results.length===0?(f=!0,l.writeCheckpoint(C.last_seq,_).then(function(){f=!1,i.last_seq=s=C.last_seq,P()}).catch(I)):P()}}function w(C){if(S=!1,r.cancelled)return U();H("changes rejected",C)}function x(){if(!(!S&&!y&&a.length<b))return;S=!0;function C(){q.cancel()}function P(){r.removeListener("cancel",C)}r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",C);var q=e.changes(T).on("change",d);q.then(P,P),q.then(p).catch(w),n.retry&&(r._changes=q,r._abortChanges=C)}function k(){L().then(function(){if(r.cancelled){U();return}return l.getCheckpoint().then(function(C){s=C,T={since:s,limit:A,batch_size:A,style:O,doc_ids:g,selector:v,return_docs:!0},n.filter&&(typeof n.filter!="string"?T.include_docs=!0:T.filter=n.filter),"heartbeat"in n&&(T.heartbeat=n.heartbeat),"timeout"in n&&(T.timeout=n.timeout),n.query_params&&(T.query_params=n.query_params),n.view&&(T.view=n.view),x()})}).catch(function(C){H("getCheckpoint rejected with ",C)})}function I(C){f=!1,H("writeCheckpoint completed with error",C)}if(r.cancelled){U();return}r._addedListeners||(r.once("cancel",U),typeof n.complete=="function"&&(r.once("error",n.complete),r.once("complete",function(C){n.complete(null,C)})),r._addedListeners=!0),typeof n.since=="undefined"?k():L().then(function(){return f=!0,l.writeCheckpoint(n.since,_)}).then(function(){if(f=!1,r.cancelled){U();return}s=n.since,k()}).catch(I)}_e(An,ge);function An(){ge.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new Promise(function(n,r){e.once("complete",n),e.once("error",r)});e.then=function(n,r){return t.then(n,r)},e.catch=function(n){return t.catch(n)},e.catch(function(){})}An.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")};An.prototype.ready=function(e,t){var n=this;if(n._readyCalled)return;n._readyCalled=!0;function r(){n.cancel()}e.once("destroyed",r),t.once("destroyed",r);function i(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}n.once("complete",i),n.once("error",i)};function fn(e,t){var n=t.PouchConstructor;return typeof e=="string"?new n(e,t):e}function ar(e,t,n,r){if(typeof n=="function"&&(r=n,n={}),typeof n=="undefined"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw V(_n,"`doc_ids` filter parameter is not a list.");n.complete=r,n=le(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var i=new An(n),a=fn(e,n),o=fn(t,n);return Da(a,o,n,i),i}_e(Rr,ge);function _f(e,t,n,r){return typeof n=="function"&&(r=n,n={}),typeof n=="undefined"&&(n={}),n=le(n),n.PouchConstructor=n.PouchConstructor||this,e=fn(e,n),t=fn(t,n),new Rr(e,t,n,r)}function Rr(e,t,n,r){var i=this;this.canceled=!1;var a=n.push?Ye({},n,n.push):n,o=n.pull?Ye({},n,n.pull):n;this.push=ar(e,t,a),this.pull=ar(t,e,o),this.pushPaused=!0,this.pullPaused=!0;function u(c){i.emit("change",{direction:"pull",change:c})}function f(c){i.emit("change",{direction:"push",change:c})}function y(c){i.emit("denied",{direction:"push",doc:c})}function $(c){i.emit("denied",{direction:"pull",doc:c})}function s(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function m(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function A(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function b(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}var O={};function S(c){return function(l,h){var _=l==="change"&&(h===u||h===f),T=l==="denied"&&(h===$||h===y),L=l==="paused"&&(h===m||h===s),B=l==="active"&&(h===b||h===A);(_||T||L||B)&&(l in O||(O[l]={}),O[l][c]=!0,Object.keys(O[l]).length===2&&i.removeAllListeners(l))}}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push)));function g(c,l,h){c.listeners(l).indexOf(h)==-1&&c.on(l,h)}this.on("newListener",function(c){c==="change"?(g(i.pull,"change",u),g(i.push,"change",f)):c==="denied"?(g(i.pull,"denied",$),g(i.push,"denied",y)):c==="active"?(g(i.pull,"active",b),g(i.push,"active",A)):c==="paused"&&(g(i.pull,"paused",m),g(i.push,"paused",s))}),this.on("removeListener",function(c){c==="change"?(i.pull.removeListener("change",u),i.push.removeListener("change",f)):c==="denied"?(i.pull.removeListener("denied",$),i.push.removeListener("denied",y)):c==="active"?(i.pull.removeListener("active",b),i.push.removeListener("active",A)):c==="paused"&&(i.pull.removeListener("paused",m),i.push.removeListener("paused",s))}),this.pull.on("removeListener",S("pull")),this.push.on("removeListener",S("push"));var v=Promise.all([this.push,this.pull]).then(function(c){var l={push:c[0],pull:c[1]};return i.emit("complete",l),r&&r(null,l),i.removeAllListeners(),l},function(c){if(i.cancel(),r?r(c):i.emit("error",c),i.removeAllListeners(),r)throw c});this.then=function(c,l){return v.then(c,l)},this.catch=function(c){return v.catch(c)}}Rr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};function mf(e){e.replicate=ar,e.sync=_f,Object.defineProperty(e.prototype,"replicate",{get:function(){var t=this;return typeof this.replicateMethods=="undefined"&&(this.replicateMethods={from:function(n,r,i){return t.constructor.replicate(n,t,r,i)},to:function(n,r,i){return t.constructor.replicate(t,n,r,i)}}),this.replicateMethods}}),e.prototype.sync=function(t,n,r){return this.constructor.sync(this,t,n,r)}}W.plugin(Ls).plugin(Ks).plugin(sf).plugin(mf);_e(ie,Error);function ie(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}ie.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new ie(401,"unauthorized","Name or password is incorrect.");new ie(400,"bad_request","Missing JSON list of 'docs'");new ie(404,"not_found","missing");new ie(409,"conflict","Document update conflict");new ie(400,"bad_request","_id field must contain a string");new ie(412,"missing_id","_id is required for puts");new ie(400,"bad_request","Only reserved document ids may start with underscore.");new ie(412,"precondition_failed","Database not open");var wf=new ie(500,"unknown_error","Database encountered an unknown error");new ie(500,"badarg","Some query argument is invalid");new ie(400,"invalid_request","Request was invalid");new ie(400,"query_parse_error","Some query parameter is invalid");new ie(500,"doc_validation","Bad special document member");new ie(400,"bad_request","Something wrong with the request");new ie(400,"bad_request","Document must be a JSON object");new ie(404,"not_found","Database not found");new ie(500,"indexed_db_went_bad","unknown");new ie(500,"web_sql_went_bad","unknown");new ie(500,"levelDB_went_went_bad","unknown");new ie(403,"forbidden","Forbidden by design doc validate_doc_update function");new ie(400,"bad_request","Invalid rev format");new ie(412,"file_exists","The database could not be created, the file already exists.");new ie(412,"missing_stub","A pre-existing attachment stub wasn't found");new ie(413,"invalid_url","Provided URL is invalid");function or(e){if(typeof e!="object"){var t=e;e=wf,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}var rn=Headers;function Sn(e){return"$"+e}function Ma(e){return e.substring(1)}function Re(){this._store={}}Re.prototype.get=function(e){var t=Sn(e);return this._store[t]};Re.prototype.set=function(e,t){var n=Sn(e);return this._store[n]=t,!0};Re.prototype.has=function(e){var t=Sn(e);return t in this._store};Re.prototype.keys=function(){return Object.keys(this._store).map(e=>Ma(e))};Re.prototype.delete=function(e){var t=Sn(e),n=t in this._store;return delete this._store[t],n};Re.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],a=this._store[i];i=Ma(i),e(a,i)}};Object.defineProperty(Re.prototype,"size",{get:function(){return Object.keys(this._store).length}});function Gt(e){if(this._store=new Re,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}Gt.prototype.add=function(e){return this._store.set(e,!0)};Gt.prototype.has=function(e){return this._store.has(e)};Gt.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(Gt.prototype,"size",{get:function(){return this._store.size}});function $f(){if(typeof Symbol=="undefined"||typeof Map=="undefined"||typeof Set=="undefined")return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}var jt,ut;$f()?(jt=Set,ut=Map):(jt=Gt,ut=Re);var bf=function(e){return atob(e)};function Af(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if(a.name!=="TypeError")throw a;for(var n=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function Sf(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function Of(e,t){return Af([Sf(e)],{type:t})}function xf(e,t){return Of(bf(e),t)}function Ef(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function Cf(e,t,n){var r=Ef(e,t,n);return r+e}var Fa=-324,ur=3,sr="";function se(e,t){if(e===t)return 0;e=et(e),t=et(t);var n=fr(e),r=fr(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return jf(e,t)}return Array.isArray(e)?qf(e,t):Bf(e,t)}function et(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=et(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];typeof a!="undefined"&&(e[i]=et(a))}}}}return e}function kf(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return Lf(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,a="";if(t)for(;++r<i;)a+=Ce(n[r]);else for(;++r<i;){var o=n[r];a+=Ce(o)+Ce(e[o])}return a}return""}function Ce(e){var t="\0";return e=et(e),fr(e)+sr+kf(e)+t}function Tf(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var a=e[t]==="0";t++;var o="",u=e.substring(t,t+ur),f=parseInt(u,10)+Fa;for(a&&(f=-f),t+=ur;;){var y=e[t];if(y==="\0")break;o+=y,t++}o=o.split("."),o.length===1?r=parseInt(o,10):r=parseFloat(o[0]+"."+o[1]),a&&(r=r-10),f!==0&&(r=parseFloat(r+"e"+f))}return{num:r,length:t-n}}function If(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(n);else if(a===e.length-2){var o=e.pop();i[o]=n}else e.push(n)}}function Pf(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();If(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var a=Tf(e,r);t.push(a.num),r+=a.length;break;case"4":for(var o="";;){var u=e[r];if(u==="\0")break;o+=u,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(o);break;case"5":var f={element:[],index:t.length};t.push(f.element),n.push(f);break;case"6":var y={element:{},index:t.length};t.push(y.element),n.push(y);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function qf(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=se(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function jf(e,t){return e===t?0:e>t?1:-1}function Bf(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),a=0;a<i;a++){var o=se(n[a],r[a]);if(o!==0||(o=se(e[n[a]],t[r[a]]),o!==0))return o}return n.length===r.length?0:n.length>r.length?1:-1}function fr(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function Lf(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",a=(r?-n:n)-Fa,o=Cf(a.toString(),"0",ur);i+=sr+o;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var f=u.toFixed(20);return f=f.replace(/\.?0+$/,""),i+=sr+f,i}function Ua(e){return an.hash(e)}function Rf(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer||typeof Blob!="undefined"&&e instanceof Blob}function Nf(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function Df(e){if(e instanceof ArrayBuffer)return Nf(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var za=Function.prototype.toString,Mf=za.call(Object);function Ff(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&za.call(n)==Mf}function Me(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=Me(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(Rf(e))return Df(e);if(!Ff(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Me(e[n]);typeof i!="undefined"&&(t[n]=i)}return t}function Uf(e){var t=!1;return Be(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function Ht(e){return Be(function(t){t=Me(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(a,o){var u;try{var f=Uf(function(y,$){y?o(y):a($)});t.push(f),u=e.apply(n,t),u&&typeof u.then=="function"&&a(u)}catch(y){o(y)}});return r&&i.then(function(a){r(null,a)},r),i})}function zf(e,t){for(var n={},r=0,i=t.length;r<i;r++){var a=t[r];a in e&&(n[a]=e[a])}return n}var cr;try{localStorage.setItem("_pouch_check_localstorage",1),cr=!!localStorage.getItem("_pouch_check_localstorage")}catch{cr=!1}function Ka(){return cr}_e(Jt,ge);function Kf(e){Ka()&&addEventListener("storage",function(t){e.emit(t.key)})}function Jt(){ge.call(this),this._listeners={},Kf(this)}Jt.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,a=!1;function o(){if(!i._listeners[t])return;if(a){a="waiting";return}a=!0;var u=zf(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function f(){a=!1}n.changes(u).on("change",function(y){y.seq>r.since&&!r.cancelled&&(r.since=y.seq,r.onChange(y))}).on("complete",function(){a==="waiting"&&pe(o),a=!1}).on("error",f)}this._listeners[t]=o,this.on(e,o)};Jt.prototype.removeListener=function(e,t){t in this._listeners&&(ge.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};Jt.prototype.notifyLocalWindows=function(e){Ka()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};Jt.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};function lr(e){if(typeof console!="undefined"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}var dr;typeof Object.assign=="function"?dr=Object.assign:dr=function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var Nr=dr;function Ai(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function tt(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(lr("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function On(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,a=n(r);return a?(a._id=t,a._rev=i,Qf(e,a,n)):{updated:!1,rev:i}})}function Qf(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return On(e,t._id,n)})}function Ge(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Ge)}catch{}}_e(Ge,Error);function Dr(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Dr)}catch{}}_e(Dr,Error);function Mr(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Mr)}catch{}}_e(Mr,Error);function Qa(e,t){return t&&e.then(function(n){pe(function(){t(null,n)})},function(n){pe(function(){t(n)})}),e}function Gf(e){return Be(function(t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&Qa(r,n),r})}function Hf(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function Nn(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function Si(e){var t=new jt(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function Dn(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function Bt(){this.promise=new Promise(function(e){e()})}Bt.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise};Bt.prototype.finish=function(){return this.promise};function Oi(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function Jf(e,t){return Oi(e)+Oi(t)+"undefined"}function xi(e,t,n,r,i,a){var o=Jf(n,r),u;if(!i&&(u=e._cachedViews=e._cachedViews||{},u[o]))return u[o];var f=e.info().then(function(y){var $=y.db_name+"-mrview-"+(i?"temp":Ua(o));function s(m){m.views=m.views||{};var A=t;A.indexOf("/")===-1&&(A=t+"/"+t);var b=m.views[A]=m.views[A]||{};if(!b[$])return b[$]=!0,m}return On(e,"_local/"+a,s).then(function(){return e.registerDependentDatabase($).then(function(m){var A=m.db;A.auto_compaction=!0;var b={name:$,db:A,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return b.db.get("_local/lastSeq").catch(function(O){if(O.status!==404)throw O}).then(function(O){return b.seq=O?O.seq:0,u&&b.db.once("destroyed",function(){delete u[o]}),b})})})});return u&&(u[o]=f),f}var Ei={},Ci=new Bt,Wf=50;function Mn(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function Yf(e){return e.length===1&&/^1-/.test(e[0].rev)}function ki(e,t){try{e.emit("error",t)}catch{lr("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),lr("error",t)}}function Xf(e,t,n,r){function i(d,p,w){try{p(w)}catch(x){ki(d,x)}}function a(d,p,w,x,k){try{return{output:p(w,x,k)}}catch(I){return ki(d,I),{error:I}}}function o(d,p){var w=se(d.key,p.key);return w!==0?w:se(d.value,p.value)}function u(d,p,w){return w=w||0,typeof p=="number"?d.slice(w,p+w):w>0?d.slice(w):d}function f(d){var p=d.value,w=p&&typeof p=="object"&&p._id||d.id;return w}function y(d){d.rows.forEach(function(p){var w=p.doc&&p.doc._attachments;!w||Object.keys(w).forEach(function(x){var k=w[x];w[x].data=xf(k.data,k.content_type)})})}function $(d){return function(p){return d.include_docs&&d.attachments&&d.binary&&y(p),p}}function s(d,p,w,x){var k=p[d];typeof k!="undefined"&&(x&&(k=encodeURIComponent(JSON.stringify(k))),w.push(d+"="+k))}function m(d){if(typeof d!="undefined"){var p=Number(d);return!isNaN(p)&&p===parseInt(d,10)?p:d}}function A(d){return d.group_level=m(d.group_level),d.limit=m(d.limit),d.skip=m(d.skip),d}function b(d){if(d){if(typeof d!="number")return new Ge('Invalid value for integer: "'+d+'"');if(d<0)return new Ge('Invalid value for positive integer: "'+d+'"')}}function O(d,p){var w=d.descending?"endkey":"startkey",x=d.descending?"startkey":"endkey";if(typeof d[w]!="undefined"&&typeof d[x]!="undefined"&&se(d[w],d[x])>0)throw new Ge("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(p.reduce&&d.reduce!==!1){if(d.include_docs)throw new Ge("{include_docs:true} is invalid for reduce");if(d.keys&&d.keys.length>1&&!d.group&&!d.group_level)throw new Ge("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(k){var I=b(d[k]);if(I)throw I})}function S(d,p,w){var x=[],k,I="GET",C,P;if(s("reduce",w,x),s("include_docs",w,x),s("attachments",w,x),s("limit",w,x),s("descending",w,x),s("group",w,x),s("group_level",w,x),s("skip",w,x),s("stale",w,x),s("conflicts",w,x),s("startkey",w,x,!0),s("start_key",w,x,!0),s("endkey",w,x,!0),s("end_key",w,x,!0),s("inclusive_end",w,x),s("key",w,x,!0),s("update_seq",w,x),x=x.join("&"),x=x===""?"":"?"+x,typeof w.keys!="undefined"){var q=2e3,j="keys="+encodeURIComponent(JSON.stringify(w.keys));j.length+x.length+1<=q?x+=(x[0]==="?"?"&":"?")+j:(I="POST",typeof p=="string"?k={keys:w.keys}:p.keys=w.keys)}if(typeof p=="string"){var N=Mn(p);return d.fetch("_design/"+N[0]+"/_view/"+N[1]+x,{headers:new rn({"Content-Type":"application/json"}),method:I,body:JSON.stringify(k)}).then(function(E){return C=E.ok,P=E.status,E.json()}).then(function(E){if(!C)throw E.status=P,or(E);return E.rows.forEach(function(M){if(M.value&&M.value.error&&M.value.error==="builtin_reduce_error")throw new Error(M.reason)}),E}).then($(w))}return k=k||{},Object.keys(p).forEach(function(E){Array.isArray(p[E])?k[E]=p[E]:k[E]=p[E].toString()}),d.fetch("_temp_view"+x,{headers:new rn({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(k)}).then(function(E){return C=E.ok,P=E.status,E.json()}).then(function(E){if(!C)throw E.status=P,or(E);return E}).then($(w))}function g(d,p,w){return new Promise(function(x,k){d._query(p,w,function(I,C){if(I)return k(I);x(C)})})}function v(d){return new Promise(function(p,w){d._viewCleanup(function(x,k){if(x)return w(x);p(k)})})}function c(d){return function(p){if(p.status===404)return d;throw p}}function l(d,p,w){var x="_local/doc_"+d,k={_id:x,keys:[]},I=w.get(d),C=I[0],P=I[1];function q(){return Yf(P)?Promise.resolve(k):p.db.get(x).catch(c(k))}function j(E){return E.keys.length?p.db.allDocs({keys:E.keys,include_docs:!0}):Promise.resolve({rows:[]})}function N(E,M){for(var J=[],te=new jt,F=0,D=M.rows.length;F<D;F++){var z=M.rows[F],G=z.doc;if(!!G&&(J.push(G),te.add(G._id),G._deleted=!C.has(G._id),!G._deleted)){var ee=C.get(G._id);"value"in ee&&(G.value=ee.value)}}var X=Dn(C);return X.forEach(function(ve){if(!te.has(ve)){var Oe={_id:ve},At=C.get(ve);"value"in At&&(Oe.value=At.value),J.push(Oe)}}),E.keys=Si(X.concat(E.keys)),J.push(E),J}return q().then(function(E){return j(E).then(function(M){return N(E,M)})})}function h(d,p,w){var x="_local/lastSeq";return d.db.get(x).catch(c({_id:x,seq:0})).then(function(k){var I=Dn(p);return Promise.all(I.map(function(C){return l(C,d,p)})).then(function(C){var P=Ai(C);return k.seq=w,P.push(k),d.db.bulkDocs({docs:P})})})}function _(d){var p=typeof d=="string"?d:d.name,w=Ei[p];return w||(w=Ei[p]=new Bt),w}function T(d,p){return Nn(_(d),function(){return L(d,p)})()}function L(d,p){var w,x;function k(F,D){var z={id:x._id,key:et(F)};typeof D!="undefined"&&D!==null&&(z.value=et(D)),w.push(z)}var I=t(d.mapFun,k),C=d.seq||0;function P(F,D){return function(){return h(d,F,D)}}let q=0,j={view:d.name,indexed_docs:q};d.sourceDB.emit("indexing",j);var N=new Bt;function E(){return d.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:C,limit:p.changes_batch_size}).then(M)}function M(F){var D=F.results;if(!D.length)return;var z=J(D);N.add(P(z,C)),q=q+D.length;let G={view:d.name,last_seq:F.last_seq,results_count:D.length,indexed_docs:q};if(d.sourceDB.emit("indexing",G),!(D.length<p.changes_batch_size))return E()}function J(F){for(var D=new ut,z=0,G=F.length;z<G;z++){var ee=F[z];if(ee.doc._id[0]!=="_"){w=[],x=ee.doc,x._deleted||i(d.sourceDB,I,x),w.sort(o);var X=te(w);D.set(ee.doc._id,[X,ee.changes])}C=ee.seq}return D}function te(F){for(var D=new ut,z,G=0,ee=F.length;G<ee;G++){var X=F[G],ve=[X.key,X.id];G>0&&se(X.key,z)===0&&ve.push(G),D.set(Ce(ve),X),z=X.key}return D}return E().then(function(){return N.finish()}).then(function(){d.seq=C})}function B(d,p,w){w.group_level===0&&delete w.group_level;var x=w.group||w.group_level,k=n(d.reduceFun),I=[],C=isNaN(w.group_level)?Number.POSITIVE_INFINITY:w.group_level;p.forEach(function(E){var M=I[I.length-1],J=x?E.key:null;if(x&&Array.isArray(J)&&(J=J.slice(0,C)),M&&se(M.groupKey,J)===0){M.keys.push([E.key,E.id]),M.values.push(E.value);return}I.push({keys:[[E.key,E.id]],values:[E.value],groupKey:J})}),p=[];for(var P=0,q=I.length;P<q;P++){var j=I[P],N=a(d.sourceDB,k,j.keys,j.values,!1);if(N.error&&N.error instanceof Mr)throw N.error;p.push({value:N.error?null:N.output,key:j.groupKey})}return{rows:u(p,w.limit,w.skip)}}function R(d,p){return Nn(_(d),function(){return K(d,p)})()}function K(d,p){var w,x=d.reduceFun&&p.reduce!==!1,k=p.skip||0;typeof p.keys!="undefined"&&!p.keys.length&&(p.limit=0,delete p.keys);function I(F){return F.include_docs=!0,d.db.allDocs(F).then(function(D){return w=D.total_rows,D.rows.map(function(z){if("value"in z.doc&&typeof z.doc.value=="object"&&z.doc.value!==null){var G=Object.keys(z.doc.value).sort(),ee=["id","key","value"];if(!(G<ee||G>ee))return z.doc.value}var X=Pf(z.doc._id);return{key:X[0],id:X[1],value:"value"in z.doc?z.doc.value:null}})})}function C(F){var D;if(x?D=B(d,F,p):typeof p.keys=="undefined"?D={total_rows:w,offset:k,rows:F}:D={total_rows:w,offset:k,rows:u(F,p.limit,p.skip)},p.update_seq&&(D.update_seq=d.seq),p.include_docs){var z=Si(F.map(f));return d.sourceDB.allDocs({keys:z,include_docs:!0,conflicts:p.conflicts,attachments:p.attachments,binary:p.binary}).then(function(G){var ee=new ut;return G.rows.forEach(function(X){ee.set(X.id,X.doc)}),F.forEach(function(X){var ve=f(X),Oe=ee.get(ve);Oe&&(X.doc=Oe)}),D})}else return D}if(typeof p.keys!="undefined"){var P=p.keys,q=P.map(function(F){var D={startkey:Ce([F]),endkey:Ce([F,{}])};return p.update_seq&&(D.update_seq=!0),I(D)});return Promise.all(q).then(Ai).then(C)}else{var j={descending:p.descending};p.update_seq&&(j.update_seq=!0);var N,E;if("start_key"in p&&(N=p.start_key),"startkey"in p&&(N=p.startkey),"end_key"in p&&(E=p.end_key),"endkey"in p&&(E=p.endkey),typeof N!="undefined"&&(j.startkey=p.descending?Ce([N,{}]):Ce([N])),typeof E!="undefined"){var M=p.inclusive_end!==!1;p.descending&&(M=!M),j.endkey=Ce(M?[E,{}]:[E])}if(typeof p.key!="undefined"){var J=Ce([p.key]),te=Ce([p.key,{}]);j.descending?(j.endkey=J,j.startkey=te):(j.startkey=J,j.endkey=te)}return x||(typeof p.limit=="number"&&(j.limit=p.limit),j.skip=k),I(j).then(C)}}function Z(d){return d.fetch("_view_cleanup",{headers:new rn({"Content-Type":"application/json"}),method:"POST"}).then(function(p){return p.json()})}function Y(d){return d.get("_local/"+e).then(function(p){var w=new ut;Object.keys(p.views).forEach(function(k){var I=Mn(k),C="_design/"+I[0],P=I[1],q=w.get(C);q||(q=new jt,w.set(C,q)),q.add(P)});var x={keys:Dn(w),include_docs:!0};return d.allDocs(x).then(function(k){var I={};k.rows.forEach(function(q){var j=q.key.substring(8);w.get(q.key).forEach(function(N){var E=j+"/"+N;p.views[E]||(E=N);var M=Object.keys(p.views[E]),J=q.doc&&q.doc.views&&q.doc.views[N];M.forEach(function(te){I[te]=I[te]||J})})});var C=Object.keys(I).filter(function(q){return!I[q]}),P=C.map(function(q){return Nn(_(q),function(){return new d.constructor(q,d.__opts).destroy()})()});return Promise.all(P).then(function(){return{ok:!0}})})},c({ok:!0}))}function Q(d,p,w){if(typeof d._query=="function")return g(d,p,w);if(tt(d))return S(d,p,w);var x={changes_batch_size:d.__opts.view_update_changes_batch_size||Wf};if(typeof p!="string")return O(w,p),Ci.add(function(){var q=xi(d,"temp_view/temp_view",p.map,p.reduce,!0,e);return q.then(function(j){return Hf(T(j,x).then(function(){return R(j,w)}),function(){return j.db.destroy()})})}),Ci.finish();var k=p,I=Mn(k),C=I[0],P=I[1];return d.get("_design/"+C).then(function(q){var j=q.views&&q.views[P];if(!j)throw new Dr("ddoc "+q._id+" has no view named "+P);r(q,P),O(w,j);var N=xi(d,k,j.map,j.reduce,!1,e);return N.then(function(E){return w.stale==="ok"||w.stale==="update_after"?(w.stale==="update_after"&&pe(function(){T(E,x)}),R(E,w)):T(E,x).then(function(){return R(E,w)})})})}function H(d,p,w){var x=this;typeof p=="function"&&(w=p,p={}),p=p?A(p):{},typeof d=="function"&&(d={map:d});var k=Promise.resolve().then(function(){return Q(x,d,p)});return Qa(k,w),k}var U=Gf(function(){var d=this;return typeof d._viewCleanup=="function"?v(d):tt(d)?Z(d):Y(d)});return{query:H,viewCleanup:U}}function xn(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var a=t[r];if(n=n[a],!n)break}return n}function Zf(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var a=t[r];e=e[a]=e[a]||{}}e[t[i-1]]=n}function Fr(e,t){return e<t?-1:e>t?1:0}function $t(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var a=e[r];r>0&&e[r-1]==="\\"&&(a==="$"||a===".")?n=n.substring(0,n.length-1)+a:a==="."?(t.push(n),n=""):n+=a}return t.push(n),t}var Vf=["$or","$nor","$not"];function Ga(e){return Vf.indexOf(e)>-1}function $e(e){return Object.keys(e)[0]}function Ur(e){return e[$e(e)]}function Lt(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var a=r[i];if(typeof a!="object"&&(a={$eq:a}),Ga(i))if(a instanceof Array){if(n[i]){n[i]=!1,t[i]=a;return}var o=[];t[i].forEach(function(f){Object.keys(a).forEach(function(y){var $=a[y],s=Math.max(Object.keys(f).length,Object.keys($).length),m=Lt([f,$]);Object.keys(m).length<=s||o.push(m)})}),t[i]=o}else t[i]=Lt([a]);else{var u=t[i]=t[i]||{};Object.keys(a).forEach(function(f){var y=a[f];if(f==="$gt"||f==="$gte")return ec(f,y,u);if(f==="$lt"||f==="$lte")return tc(f,y,u);if(f==="$ne")return nc(y,u);if(f==="$eq")return rc(y,u);if(f==="$regex")return ic(y,u);u[f]=y})}})}),t}function ec(e,t,n){typeof n.$eq=="undefined"&&(typeof n.$gte!="undefined"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt!="undefined"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function tc(e,t,n){typeof n.$eq=="undefined"&&(typeof n.$lte!="undefined"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt!="undefined"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function nc(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function rc(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function ic(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function Ha(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=Lt(e[n].$and));var r=e[t];typeof r=="object"&&Ha(r)}return e}function Ja(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=Ja(r,t))}return t}function Wa(e){var t=Me(e),n=!1;Ja(t,!1)&&(t=Ha(t),"$and"in t&&(t=Lt(t.$and)),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(f){for(var y=Object.keys(f),$=0;$<y.length;$++){var s=y[$],m=f[s];(typeof m!="object"||m===null)&&(f[s]={$eq:m})}})}),"$not"in t&&(t.$not=Lt([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var a=r[i],o=t[a];typeof o!="object"||o===null?o={$eq:o}:n||("$ne"in o&&(o.$ne=[o.$ne]),"$regex"in o&&(o.$regex=[o.$regex])),t[a]=o}return t}function ac(e){function t(n){return e.map(function(r){var i=$e(r),a=$t(i),o=xn(n,a);return o})}return function(n,r){var i=t(n.doc),a=t(r.doc),o=se(i,a);return o!==0?o:Fr(n.doc._id,r.doc._id)}}function Ya(e,t,n){if(e=e.filter(function(o){return dt(o.doc,t.selector,n)}),t.sort){var r=ac(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&Ur(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,a=("limit"in t?t.limit:e.length)+i;e=e.slice(i,a)}return e}function dt(e,t,n){return n.every(function(r){var i=t[r],a=$t(r),o=xn(e,a);return Ga(r)?oc(r,i,e):cn(i,e,a,o)})}function cn(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var a=e[i];if(i.indexOf("$")===0)return Ti(i,t,a,n,r);var o=$t(i);if(r===void 0&&typeof a!="object"&&o.length>0)return!1;var u=xn(r,o);return typeof a=="object"?cn(a,t,n,u):Ti("$eq",t,a,o,u)}):e===r:!0}function oc(e,t,n){return e==="$or"?t.some(function(r){return dt(n,r,Object.keys(r))}):e==="$not"?!dt(n,t,Object.keys(t)):!t.find(function(r){return dt(n,r,Object.keys(r))})}function Ti(e,t,n,r,i){if(!Pi[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Pi[e](t,n,r,i)}function xt(e){return typeof e!="undefined"&&e!==null}function ze(e){return typeof e!="undefined"}function uc(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function Ii(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return se(n,r)===0}):se(n,e)===0})}function sc(e,t){return t.every(function(n){return e.some(function(r){return se(n,r)===0})})}function fc(e,t){return e.length===t}function cc(e,t){var n=new RegExp(t);return n.test(e)}function lc(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var Pi={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.some(function(i){return dt(i,t,Object.keys(t))}):r.some(function(i){return cn(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.every(function(i){return dt(i,t,Object.keys(t))}):r.every(function(i){return cn(t,e,n,i)})},$eq:function(e,t,n,r){return ze(r)&&se(r,t)===0},$gte:function(e,t,n,r){return ze(r)&&se(r,t)>=0},$gt:function(e,t,n,r){return ze(r)&&se(r,t)>0},$lte:function(e,t,n,r){return ze(r)&&se(r,t)<=0},$lt:function(e,t,n,r){return ze(r)&&se(r,t)<0},$exists:function(e,t,n,r){return t?ze(r):!ze(r)},$mod:function(e,t,n,r){return xt(r)&&uc(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return se(r,i)!==0})},$in:function(e,t,n,r){return xt(r)&&Ii(r,t)},$nin:function(e,t,n,r){return xt(r)&&!Ii(r,t)},$size:function(e,t,n,r){return xt(r)&&Array.isArray(r)&&fc(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&sc(r,t)},$regex:function(e,t,n,r){return xt(r)&&typeof r=="string"&&t.every(function(i){return cc(r,i)})},$type:function(e,t,n,r){return lc(r,t)}};function En(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=Wa(t);var n={doc:e},r=Ya([n],{selector:t},Object.keys(t));return r&&r.length===1}function Xa(e){return e=Me(e),e.index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function dc(e,t,n){var r="",i=t,a=!0;if(["$in","$nin","$or","$and","$mod","$nor","$all"].indexOf(e)!==-1&&(Array.isArray(t)||(r="Query operator "+e+" must be an array.")),["$not","$elemMatch","$allMatch"].indexOf(e)!==-1&&(!Array.isArray(t)&&typeof t=="object"&&t!==null||(r="Query operator "+e+" must be an object.")),e==="$mod"&&Array.isArray(t))if(t.length!==2)r="Query operator $mod must be in the format [divisor, remainder], where divisor and remainder are both integers.";else{var o=t[0],u=t[1];o===0&&(r="Query operator $mod's divisor cannot be 0, cannot divide by zero.",a=!1),(typeof o!="number"||parseInt(o,10)!==o)&&(r="Query operator $mod's divisor is not an integer.",i=o),parseInt(u,10)!==u&&(r="Query operator $mod's remainder is not an integer.",i=u)}if(e==="$exists"&&typeof t!="boolean"&&(r="Query operator $exists must be a boolean."),e==="$type"){var f=["null","boolean","number","string","array","object"],y='"'+f.slice(0,f.length-1).join('", "')+'", or "'+f[f.length-1]+'"';(typeof t!="string"||f.indexOf(t)==-1)&&(r="Query operator $type must be a string. Supported values: "+y+".")}if(e==="$size"&&parseInt(t,10)!==t&&(r="Query operator $size must be a integer."),e==="$regex"&&typeof t!="string"&&(console.log("here",n),n?r="Query operator $regex must be a string.":t instanceof RegExp||(r="Query operator $regex must be a string or an instance of a javascript regular expression.")),r){if(a){var $=i===null?" ":Array.isArray(i)?" array":" "+typeof i,s=typeof i=="object"&&i!==null?JSON.stringify(i,null,"	"):i;r+=" Received"+$+": "+s}throw new Error(r)}}var vc=["$all","$allMatch","$and","$elemMatch","$exists","$in","$mod","$nin","$nor","$not","$or","$regex","$size","$type"],hc=["$in","$nin","$mod","$all"],yc=["$eq","$gt","$gte","$lt","$lte"];function ln(e,t){if(Array.isArray(e))for(var n of e)typeof n=="object"&&o!==null&&ln(n,t);else for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];vc.indexOf(a)!==-1&&dc(a,o,t),yc.indexOf(a)===-1&&hc.indexOf(a)===-1&&typeof o=="object"&&o!==null&&ln(o,t)}}function Wt(e,t,n,r){var i,a;n.headers=new rn({"Content-type":"application/json"}),e.fetch(t,n).then(function(o){return i=o.status,a=o.ok,o.json()}).then(function(o){if(a)r(null,o);else{o.status=i;var u=or(o);r(u)}}).catch(r)}function gc(e,t,n){t=Xa(t),Wt(e,"_index",{method:"POST",body:JSON.stringify(t)},n)}function pc(e,t,n){ln(t.selector,!0),Wt(e,"_find",{method:"POST",body:JSON.stringify(t)},n)}function _c(e,t,n){Wt(e,"_explain",{method:"POST",body:JSON.stringify(t)},n)}function mc(e,t){Wt(e,"_index",{method:"GET"},t)}function wc(e,t,n){var r=t.ddoc,i=t.type||"json",a=t.name;if(!r)return n(new Error("you must provide an index's ddoc"));if(!a)return n(new Error("you must provide an index's name"));var o="_index/"+[r,i,a].map(encodeURIComponent).join("/");Wt(e,o,{method:"DELETE"},n)}function Za(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}}function Yt(e){return Za(function(t){var n=t.pop(),r=e.apply(this,t);return $c(r,n),r})}function $c(e,t){return e.then(function(n){pe(function(){t(null,n)})},function(n){pe(function(){t(n)})}),e}var zr=Za(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?t=t.concat(zr.apply(null,i)):t.push(i)}return t});function Kr(e){for(var t={},n=0,r=e.length;n<r;n++)t=Nr(t,e[n]);return t}function bc(e,t){for(var n={},r=0,i=t.length;r<i;r++){var a=$t(t[r]),o=xn(e,a);typeof o!="undefined"&&Zf(n,a,o)}return n}function Va(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ac(e,t){return e.length>t.length?!1:Va(e,t)}function Sc(e,t){e=e.slice();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(!e.length)break;var a=e.indexOf(i);if(a===-1)return!1;e.splice(a,1)}return!0}function Oc(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function xc(e,t){for(var n=null,r=-1,i=0,a=e.length;i<a;i++){var o=e[i],u=t(o);u>r&&(r=u,n=o)}return n}function qi(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ec(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map(function(r){return r.substring(1)})}function Cc(e,t,n){return function(r){if(!(n&&!En(r,n))){for(var i=[],a=0,o=e.length;a<o;a++){for(var u=$t(e[a]),f=r,y=0,$=u.length;y<$;y++){var s=u[y];if(f=f[s],typeof f=="undefined")return}i.push(f)}t(i)}}}function kc(e,t,n){var r=$t(e);return function(i){if(!(n&&!En(i,n))){for(var a=i,o=0,u=r.length;o<u;o++){var f=r[o];if(a=a[f],typeof a=="undefined")return}t(a)}}}function Tc(e,t,n){return function(r){n&&!En(r,n)||t(r[e])}}function Ic(e,t,n){return function(r){if(!(n&&!En(r,n))){for(var i=[],a=0,o=e.length;a<o;a++)i.push(r[e[a]]);t(i)}}}function Pc(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.indexOf(".")!==-1)return!1}return!0}function qc(e,t,n){var r=Pc(e),i=e.length===1;return r?i?Tc(e[0],t,n):Ic(e,t,n):i?kc(e[0],t,n):Cc(e,t,n)}function jc(e,t){const n=Object.keys(e.fields),r=e.partial_filter_selector;return qc(n,t,r)}function Bc(){throw new Error("reduce not supported")}function Lc(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}var Rc=Xf("indexes",jc,Bc,Lc);function Qr(e){return e._customFindAbstractMapper||Rc}function Nc(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}else return t})}function Dc(e){var t=[];return typeof e=="string"?t.push(e):t=e,t.map(function(n){return n.replace("_design/","")})}function eo(e){return e.fields=e.fields.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}return t}),e}function Mc(e,t){for(var n=[],r=0;r<t.def.fields.length;r++){var i=$e(t.def.fields[r]);n.push(e[i])}return n}function Fc(e,t,n){for(var r=n.def.fields,i=0,a=e.length;i<a;i++){var o=e[i],u=Mc(o.doc,n);if(r.length===1)u=u[0];else for(;u.length>t.length;)u.pop();if(Math.abs(se(u,t))>0)break}return i>0?e.slice(i):e}function Uc(e){var t=Me(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}function zc(e){var t=e.fields.filter(function(n){return Ur(n)==="asc"});if(t.length!==0&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}function Kc(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter(function(r){return Object.keys(r)[0]!=="_id"}).map(function(r){return Object.keys(r)[0]});if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}t.defaultUsed}function Qc(e){if(typeof e.selector!="object")throw new Error("you must provide a selector when you find()")}function Gc(e,t){var n=Object.keys(e),r=t?t.map($e):[],i;return n.length>=r.length?i=n:i=r,r.length===0?{fields:i}:(i=i.sort(function(a,o){var u=r.indexOf(a);u===-1&&(u=Number.MAX_VALUE);var f=r.indexOf(o);return f===-1&&(f=Number.MAX_VALUE),u<f?-1:u>f?1:0}),{fields:i,sortOrder:t.map($e)})}function Hc(e,t){t=Xa(t);var n=Me(t.index);t.index=eo(t.index),zc(t.index);var r;function i(){return r||(r=Ua(JSON.stringify(t)))}var a=t.name||"idx-"+i(),o=t.ddoc||"idx-"+i(),u="_design/"+o,f=!1,y=!1;function $(s){return s._rev&&s.language!=="query"&&(f=!0),s.language="query",s.views=s.views||{},y=!!s.views[a],y?!1:(s.views[a]={map:{fields:Kr(t.index.fields)},reduce:"_count",options:{def:n}},s)}return e.constructor.emit("debug",["find","creating index",u]),On(e,u,$).then(function(){if(f)throw new Error('invalid language for ddoc with id "'+u+'" (should be "query")')}).then(function(){var s=o+"/"+a;return Qr(e).query.call(e,s,{limit:0,reduce:!1}).then(function(){return{id:u,name:a,result:y?"exists":"created"}})})}function to(e){return e.allDocs({startkey:"_design/",endkey:"_design/\uFFFF",include_docs:!0}).then(function(t){var n={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return n.indexes=zr(n.indexes,t.rows.filter(function(r){return r.doc.language==="query"}).map(function(r){var i=r.doc.views!==void 0?Object.keys(r.doc.views):[];return i.map(function(a){var o=r.doc.views[a];return{ddoc:r.id,name:a,type:"json",def:eo(o.options.def)}})})),n.indexes.sort(function(r,i){return Fr(r.name,i.name)}),n.total_rows=n.indexes.length,n})}var dn=null,vr={"\uFFFF":{}};const Jc={queryOpts:{limit:0,startkey:vr,endkey:dn},inMemoryFields:[]};function Wc(e,t){for(var n=e.def.fields.map($e),r=0,i=n.length;r<i;r++){var a=n[r];if(t===a)return!0}return!1}function Yc(e,t){var n=e[t],r=$e(n);return r!=="$eq"}function no(e,t){var n=t.def.fields.map($e);return e.slice().sort(function(r,i){var a=n.indexOf(r),o=n.indexOf(i);return a===-1&&(a=Number.MAX_VALUE),o===-1&&(o=Number.MAX_VALUE),Fr(a,o)})}function Xc(e,t,n){n=no(n,e);for(var r=!1,i=0,a=n.length;i<a;i++){var o=n[i];if(r||!Wc(e,o))return n.slice(i);i<a-1&&Yc(t,o)&&(r=!0)}return[]}function Zc(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Object.keys(r).forEach(function(i){i==="$ne"&&t.push(n)})}),t}function Vc(e,t,n,r){var i=zr(e,Xc(t,n,r),Zc(n));return no(Ec(i),t)}function el(e,t,n){if(t){var r=Ac(t,e),i=Va(n,e);return r&&i}return Sc(n,e)}var tl=["$eq","$gt","$gte","$lt","$lte"];function ro(e){return tl.indexOf(e)===-1}function nl(e,t){var n=e[0],r=t[n];if(typeof r=="undefined")return!0;var i=Object.keys(r).length===1&&$e(r)==="$ne";return!i}function rl(e,t,n,r){var i=e.def.fields.map($e),a=el(i,t,n);return a?nl(i,r):!1}function il(e,t,n,r){return r.filter(function(i){return rl(i,n,t,e)})}function al(e,t,n,r,i){var a=il(e,t,n,r);if(a.length===0){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var o=r[0];return o.defaultUsed=!0,o}if(a.length===1&&!i)return a[0];var u=Oc(t);function f(m){for(var A=m.def.fields.map($e),b=0,O=0,S=A.length;O<S;O++){var g=A[O];u[g]&&b++}return b}if(i){var y="_design/"+i[0],$=i.length===2?i[1]:!1,s=a.find(function(m){return!!($&&m.ddoc===y&&$===m.name||m.ddoc===y)});if(!s)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return s}return xc(a,f)}function ol(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:dn}}function ul(e,t){var n=$e(t.def.fields[0]),r=e[n]||{},i=[],a=Object.keys(r),o;return a.forEach(function(u){ro(u)&&i.push(n);var f=r[u],y=ol(u,f);o?o=Kr([o,y]):o=y}),{queryOpts:o,inMemoryFields:i}}function sl(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function fl(e,t){var n=t.def.fields.map($e),r=[],i=[],a=[],o,u;function f(B){o!==!1&&i.push(dn),u!==!1&&a.push(vr),r=n.slice(B)}for(var y=0,$=n.length;y<$;y++){var s=n[y],m=e[s];if(!m||!Object.keys(m).length){f(y);break}else if(Object.keys(m).some(ro)){f(y);break}else if(y>0){var A="$gt"in m||"$gte"in m||"$lt"in m||"$lte"in m,b=Object.keys(e[n[y-1]]),O=qi(b,["$eq"]),S=qi(b,Object.keys(m)),g=A&&!O&&!S;if(g){f(y);break}}for(var v=Object.keys(m),c=null,l=0;l<v.length;l++){var h=v[l],_=m[h],T=sl(h,_);c?c=Kr([c,T]):c=T}i.push("startkey"in c?c.startkey:dn),a.push("endkey"in c?c.endkey:vr),"inclusive_start"in c&&(o=c.inclusive_start),"inclusive_end"in c&&(u=c.inclusive_end)}var L={startkey:i,endkey:a};return typeof o!="undefined"&&(L.inclusive_start=o),typeof u!="undefined"&&(L.inclusive_end=u),{queryOpts:L,inMemoryFields:r}}function cl(e){return Object.keys(e).map(function(n){return e[n]}).some(function(n){return typeof n=="object"&&Object.keys(n).length===0})}function ll(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}function dl(e,t){return t.defaultUsed?ll(e):t.def.fields.length===1?ul(e,t):fl(e,t)}function vl(e,t){var n=e.selector,r=e.sort;if(cl(n))return Nr({},Jc,{index:t[0]});var i=Gc(n,r),a=i.fields,o=i.sortOrder,u=al(n,a,o,t,e.use_index),f=dl(n,u),y=f.queryOpts,$=f.inMemoryFields,s=Vc($,u,n,a),m={queryOpts:y,index:u,inMemoryFields:s};return m}function hl(e){return e.ddoc.substring(8)+"/"+e.name}function yl(e,t){var n=Me(t);return n.descending?("endkey"in n&&typeof n.endkey!="string"&&(n.endkey=""),"startkey"in n&&typeof n.startkey!="string"&&(n.limit=0)):("startkey"in n&&typeof n.startkey!="string"&&(n.startkey=""),"endkey"in n&&typeof n.endkey!="string"&&(n.limit=0)),"key"in n&&typeof n.key!="string"&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count),e.allDocs(n).then(function(r){return r.rows=r.rows.filter(function(i){return!/^_design\//.test(i.id)}),n.original_limit&&(n.limit=n.original_limit),r.rows=r.rows.slice(0,n.limit),r})}function io(e,t,n){return t.selector&&(ln(t.selector,!1),t.selector=Wa(t.selector)),t.sort&&(t.sort=Nc(t.sort)),t.use_index&&(t.use_index=Dc(t.use_index)),Qc(t),to(e).then(function(r){e.constructor.emit("debug",["find","planning query",t]);var i=vl(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);var a=i.index;Kc(t,a);var o=Nr({include_docs:!0,reduce:!1,indexes_count:r.total_rows},i.queryOpts);if("startkey"in o&&"endkey"in o&&se(o.startkey,o.endkey)>0)return{docs:[]};var u=t.sort&&typeof t.sort[0]!="string"&&Ur(t.sort[0])==="desc";return u&&(o.descending=!0,o=Uc(o)),i.inMemoryFields.length||("limit"in t&&(o.limit=t.limit),"skip"in t&&(o.skip=t.skip)),n?Promise.resolve(i,o):Promise.resolve().then(function(){if(a.name==="_all_docs")return yl(e,o);var f=hl(a);return Qr(e).query.call(e,f,o)}).then(function(f){o.inclusive_start===!1&&(f.rows=Fc(f.rows,o.startkey,a)),i.inMemoryFields.length&&(f.rows=Ya(f.rows,t,i.inMemoryFields));var y={docs:f.rows.map(function($){var s=$.doc;return t.fields?bc(s,t.fields):s})};return a.defaultUsed&&(y.warning="No matching index found, create an index to optimize query time."),y})})}function gl(e,t){return io(e,t,!0).then(function(n){return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}function pl(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,r=t.name;function i(a){return Object.keys(a.views).length===1&&a.views[r]?{_id:n,_deleted:!0}:(delete a.views[r],a)}return On(e,n,i).then(function(){return Qr(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}var _l=Yt(Hc),ml=Yt(io),wl=Yt(gl),$l=Yt(to),bl=Yt(pl),bt={};bt.createIndex=Ht(function(e,t){if(typeof e!="object")return t(new Error("you must provide an index to create"));var n=tt(this)?gc:_l;n(this,e,t)});bt.find=Ht(function(e,t){if(typeof t=="undefined"&&(t=e,e=void 0),typeof e!="object")return t(new Error("you must provide search parameters to find()"));var n=tt(this)?pc:ml;n(this,e,t)});bt.explain=Ht(function(e,t){if(typeof t=="undefined"&&(t=e,e=void 0),typeof e!="object")return t(new Error("you must provide search parameters to explain()"));var n=tt(this)?_c:wl;n(this,e,t)});bt.getIndexes=Ht(function(e){var t=tt(this)?mc:$l;t(this,e)});bt.deleteIndex=Ht(function(e,t){if(typeof e!="object")return t(new Error("you must provide an index to delete"));var n=tt(this)?wc:bl;n(this,e,t)});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Fn;const pt=globalThis.trustedTypes,ji=pt?pt.createPolicy("lit-html",{createHTML:e=>e}):void 0,Ne=`lit$${(Math.random()+"").slice(9)}$`,ao="?"+Ne,Al=`<${ao}>`,_t=document,Rt=(e="")=>_t.createComment(e),Nt=e=>e===null||typeof e!="object"&&typeof e!="function",oo=Array.isArray,Sl=e=>{var t;return oo(e)||typeof((t=e)===null||t===void 0?void 0:t[Symbol.iterator])=="function"},Et=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Bi=/-->/g,Li=/>/g,Ke=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Ri=/'/g,Ni=/"/g,uo=/^(?:script|style|textarea|title)$/i,Ol=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),hr=Ol(1),nt=Symbol.for("lit-noChange"),de=Symbol.for("lit-nothing"),Di=new WeakMap,xl=(e,t,n)=>{var r,i;const a=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:t;let o=a._$litPart$;if(o===void 0){const u=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;a._$litPart$=o=new Xt(t.insertBefore(Rt(),u),u,void 0,n!=null?n:{})}return o._$AI(e),o},vt=_t.createTreeWalker(_t,129,null,!1),El=(e,t)=>{const n=e.length-1,r=[];let i,a=t===2?"<svg>":"",o=Et;for(let f=0;f<n;f++){const y=e[f];let $,s,m=-1,A=0;for(;A<y.length&&(o.lastIndex=A,s=o.exec(y),s!==null);)A=o.lastIndex,o===Et?s[1]==="!--"?o=Bi:s[1]!==void 0?o=Li:s[2]!==void 0?(uo.test(s[2])&&(i=RegExp("</"+s[2],"g")),o=Ke):s[3]!==void 0&&(o=Ke):o===Ke?s[0]===">"?(o=i!=null?i:Et,m=-1):s[1]===void 0?m=-2:(m=o.lastIndex-s[2].length,$=s[1],o=s[3]===void 0?Ke:s[3]==='"'?Ni:Ri):o===Ni||o===Ri?o=Ke:o===Bi||o===Li?o=Et:(o=Ke,i=void 0);const b=o===Ke&&e[f+1].startsWith("/>")?" ":"";a+=o===Et?y+Al:m>=0?(r.push($),y.slice(0,m)+"$lit$"+y.slice(m)+Ne+b):y+Ne+(m===-2?(r.push(void 0),f):b)}const u=a+(e[n]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[ji!==void 0?ji.createHTML(u):u,r]};class Dt{constructor({strings:t,_$litType$:n},r){let i;this.parts=[];let a=0,o=0;const u=t.length-1,f=this.parts,[y,$]=El(t,n);if(this.el=Dt.createElement(y,r),vt.currentNode=this.el.content,n===2){const s=this.el.content,m=s.firstChild;m.remove(),s.append(...m.childNodes)}for(;(i=vt.nextNode())!==null&&f.length<u;){if(i.nodeType===1){if(i.hasAttributes()){const s=[];for(const m of i.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(Ne)){const A=$[o++];if(s.push(m),A!==void 0){const b=i.getAttribute(A.toLowerCase()+"$lit$").split(Ne),O=/([.?@])?(.*)/.exec(A);f.push({type:1,index:a,name:O[2],strings:b,ctor:O[1]==="."?kl:O[1]==="?"?Il:O[1]==="@"?Pl:Cn})}else f.push({type:6,index:a})}for(const m of s)i.removeAttribute(m)}if(uo.test(i.tagName)){const s=i.textContent.split(Ne),m=s.length-1;if(m>0){i.textContent=pt?pt.emptyScript:"";for(let A=0;A<m;A++)i.append(s[A],Rt()),vt.nextNode(),f.push({type:2,index:++a});i.append(s[m],Rt())}}}else if(i.nodeType===8)if(i.data===ao)f.push({type:2,index:a});else{let s=-1;for(;(s=i.data.indexOf(Ne,s+1))!==-1;)f.push({type:7,index:a}),s+=Ne.length-1}a++}}static createElement(t,n){const r=_t.createElement("template");return r.innerHTML=t,r}}function mt(e,t,n=e,r){var i,a,o,u;if(t===nt)return t;let f=r!==void 0?(i=n._$Cl)===null||i===void 0?void 0:i[r]:n._$Cu;const y=Nt(t)?void 0:t._$litDirective$;return(f==null?void 0:f.constructor)!==y&&((a=f==null?void 0:f._$AO)===null||a===void 0||a.call(f,!1),y===void 0?f=void 0:(f=new y(e),f._$AT(e,n,r)),r!==void 0?((o=(u=n)._$Cl)!==null&&o!==void 0?o:u._$Cl=[])[r]=f:n._$Cu=f),f!==void 0&&(t=mt(e,f._$AS(e,t.values),f,r)),t}class Cl{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:r},parts:i}=this._$AD,a=((n=t==null?void 0:t.creationScope)!==null&&n!==void 0?n:_t).importNode(r,!0);vt.currentNode=a;let o=vt.nextNode(),u=0,f=0,y=i[0];for(;y!==void 0;){if(u===y.index){let $;y.type===2?$=new Xt(o,o.nextSibling,this,t):y.type===1?$=new y.ctor(o,y.name,y.strings,this,t):y.type===6&&($=new ql(o,this,t)),this.v.push($),y=i[++f]}u!==(y==null?void 0:y.index)&&(o=vt.nextNode(),u++)}return a}m(t){let n=0;for(const r of this.v)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class Xt{constructor(t,n,r,i){var a;this.type=2,this._$AH=de,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=i,this._$Cg=(a=i==null?void 0:i.isConnected)===null||a===void 0||a}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&t.nodeType===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=mt(this,t,n),Nt(t)?t===de||t==null||t===""?(this._$AH!==de&&this._$AR(),this._$AH=de):t!==this._$AH&&t!==nt&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):Sl(t)?this.S(t):this.$(t)}M(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==de&&Nt(this._$AH)?this._$AA.nextSibling.data=t:this.k(_t.createTextNode(t)),this._$AH=t}T(t){var n;const{values:r,_$litType$:i}=t,a=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=Dt.createElement(i.h,this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===a)this._$AH.m(r);else{const o=new Cl(a,this),u=o.p(this.options);o.m(r),this.k(u),this._$AH=o}}_$AC(t){let n=Di.get(t.strings);return n===void 0&&Di.set(t.strings,n=new Dt(t)),n}S(t){oo(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const a of t)i===n.length?n.push(r=new Xt(this.M(Rt()),this.M(Rt()),this,this.options)):r=n[i],r._$AI(a),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(t=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var n;this._$AM===void 0&&(this._$Cg=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}}class Cn{constructor(t,n,r,i,a){this.type=1,this._$AH=de,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=a,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=de}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,r,i){const a=this.strings;let o=!1;if(a===void 0)t=mt(this,t,n,0),o=!Nt(t)||t!==this._$AH&&t!==nt,o&&(this._$AH=t);else{const u=t;let f,y;for(t=a[0],f=0;f<a.length-1;f++)y=mt(this,u[r+f],n,f),y===nt&&(y=this._$AH[f]),o||(o=!Nt(y)||y!==this._$AH[f]),y===de?t=de:t!==de&&(t+=(y!=null?y:"")+a[f+1]),this._$AH[f]=y}o&&!i&&this.C(t)}C(t){t===de?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}}class kl extends Cn{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===de?void 0:t}}const Tl=pt?pt.emptyScript:"";class Il extends Cn{constructor(){super(...arguments),this.type=4}C(t){t&&t!==de?this.element.setAttribute(this.name,Tl):this.element.removeAttribute(this.name)}}class Pl extends Cn{constructor(t,n,r,i,a){super(t,n,r,i,a),this.type=5}_$AI(t,n=this){var r;if((t=(r=mt(this,t,n,0))!==null&&r!==void 0?r:de)===nt)return;const i=this._$AH,a=t===de&&i!==de||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==de&&(i===de||a);a&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,t):this._$AH.handleEvent(t)}}class ql{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){mt(this,t)}}const Mi=window.litHtmlPolyfillSupport;Mi==null||Mi(Dt,Xt),((Fn=globalThis.litHtmlVersions)!==null&&Fn!==void 0?Fn:globalThis.litHtmlVersions=[]).push("2.2.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jl={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Bl=e=>(...t)=>({_$litDirective$:e,values:t});class Ll{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rl=e=>e===null||typeof e!="object"&&typeof e!="function",Nl=e=>e.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const It=(e,t)=>{var n,r;const i=e._$AN;if(i===void 0)return!1;for(const a of i)(r=(n=a)._$AO)===null||r===void 0||r.call(n,t,!1),It(a,t);return!0},vn=e=>{let t,n;do{if((t=e._$AM)===void 0)break;n=t._$AN,n.delete(e),e=t}while((n==null?void 0:n.size)===0)},so=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(n===void 0)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),Fl(t)}};function Dl(e){this._$AN!==void 0?(vn(this),this._$AM=e,so(this)):this._$AM=e}function Ml(e,t=!1,n=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(t)if(Array.isArray(r))for(let a=n;a<r.length;a++)It(r[a],!1),vn(r[a]);else r!=null&&(It(r,!1),vn(r));else It(this,e)}const Fl=e=>{var t,n,r,i;e.type==jl.CHILD&&((t=(r=e)._$AP)!==null&&t!==void 0||(r._$AP=Ml),(n=(i=e)._$AQ)!==null&&n!==void 0||(i._$AQ=Dl))};class Ul extends Ll{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,r){super._$AT(t,n,r),so(this),this.isConnected=t._$AU}_$AO(t,n=!0){var r,i;t!==this.isConnected&&(this.isConnected=t,t?(r=this.reconnected)===null||r===void 0||r.call(this):(i=this.disconnected)===null||i===void 0||i.call(this)),n&&(It(this,t),vn(this))}setValue(t){if(Nl(this._$Ct))this._$Ct._$AI(t,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class zl{constructor(t){this.U=t}disconnect(){this.U=void 0}reconnect(t){this.U=t}deref(){return this.U}}class Kl{constructor(){this.Y=void 0,this.q=void 0}get(){return this.Y}pause(){var t;(t=this.Y)!==null&&t!==void 0||(this.Y=new Promise(n=>this.q=n))}resume(){var t;(t=this.q)===null||t===void 0||t.call(this),this.Y=this.q=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fi=e=>!Rl(e)&&typeof e.then=="function";class Ql extends Ul{constructor(){super(...arguments),this._$Cwt=1073741823,this._$Cyt=[],this._$CG=new zl(this),this._$CK=new Kl}render(...t){var n;return(n=t.find(r=>!Fi(r)))!==null&&n!==void 0?n:nt}update(t,n){const r=this._$Cyt;let i=r.length;this._$Cyt=n;const a=this._$CG,o=this._$CK;this.isConnected||this.disconnected();for(let u=0;u<n.length&&!(u>this._$Cwt);u++){const f=n[u];if(!Fi(f))return this._$Cwt=u,f;u<i&&f===r[u]||(this._$Cwt=1073741823,i=0,Promise.resolve(f).then(async y=>{for(;o.get();)await o.get();const $=a.deref();if($!==void 0){const s=$._$Cyt.indexOf(f);s>-1&&s<$._$Cwt&&($._$Cwt=s,$.setValue(y))}}))}return nt}disconnected(){this._$CG.disconnect(),this._$CK.pause()}reconnected(){this._$CG.reconnect(this),this._$CK.resume()}}const Gl=Bl(Ql);W.plugin(bt);var it=new W("cats");it.changes({since:"now",live:!0,include_docs:!0}).on("change",async e=>{var t;e.deleted?console.log("deleted",e):(console.log("change",e),((t=e.doc)==null?void 0:t.type)==="cat"&&await Gr())});async function Hl(e,t){var a,o;const r=await(await fetch("https://api.thecatapi.com/v1/images/search")).json();let i=await Jl(e);i._id=(a=i._id)!=null?a:new Date().toJSON(),i._rev=(o=i._rev)!=null?o:"",i.url=r[0].url,i.type="cat",i.name=e,i.age=t,i.hobbies=["playing","sleeping","hunting"],await it.put(i)}async function Jl(e){try{return await it.get(e)}catch{return{}}}async function fo(){return(await it.allDocs({include_docs:!0,descending:!0})).rows}async function Wl(e){return await it.get(e)}async function Yl(){var e=await fo();e.forEach(async t=>{var n=await Wl(t.id);it.remove(n),await Gr()})}async function Xl(){const e=document.getElementById("catName"),t=document.getElementById("catAge"),n=document.getElementById("catAgeOutput");await Hl(e.value,t.value),e.value="",t.value=20,n.value="20"}const Zl=e=>hr` <div class="card cat-card" style="width: 18rem;">
    <img src="${e.url}" class="card-img-top" alt="image of cat" />
    <div class="card-body">
      <div class="card-text">
        ${e.name}, ${e.age}. <br />
        ${e.hobbies.join(", ")}
      </div>
    </div>
  </div>`,Vl=()=>hr`${Gl(fo().then(e=>e.map(t=>t.doc).map(t=>Zl(t))),hr`Loading cats...`)}`;async function Gr(){xl(Vl(),document.getElementById("catList"))}document.getElementById("submitBtn").addEventListener("click",async e=>{if(document.querySelector("form").checkValidity()){e.preventDefault();try{await Xl()}catch(t){console.error("Error when submitting",t)}}});document.getElementById("deleteBtn").addEventListener("click",async e=>{e.preventDefault(),await Yl()});window.onload=async()=>{const e=await it.info();console.info("DB info:",e),await Gr()};
